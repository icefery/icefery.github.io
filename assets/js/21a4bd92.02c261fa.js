"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[4394],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>c});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=n.createContext({}),d=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(p.Provider,{value:t},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),s=d(a),k=l,c=s["".concat(p,".").concat(k)]||s[k]||m[k]||r;return a?n.createElement(c,i(i({ref:t},u),{},{components:a})):n.createElement(c,i({ref:t},u))}));function c(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=k;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[s]="string"==typeof e?e:l,i[1]=o;for(var d=2;d<r;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},5269:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>s,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var n=a(7462),l=(a(7294),a(3905));const r={},i=void 0,o={unversionedId:"container/kubernetes/kubernetes notes",id:"container/kubernetes/kubernetes notes",title:"kubernetes notes",description:"\u4e00\u3001Pod",source:"@site/docs/container/kubernetes/kubernetes notes.md",sourceDirName:"container/kubernetes",slug:"/container/kubernetes/kubernetes notes",permalink:"/docs/container/kubernetes/kubernetes notes",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"install kubernetes on ubuntu",permalink:"/docs/container/kubernetes/install kubernetes on ubuntu"},next:{title:"\u901a\u8fc7 CoreDNS + ETCD  + ExternalDNS \u6253\u901a\u5185\u7f51 Ingress \u57df\u540d\u8bbf\u95ee",permalink:"/docs/container/\u901a\u8fc7 CoreDNS + ETCD  + ExternalDNS \u6253\u901a\u5185\u7f51 Ingress \u57df\u540d\u8bbf\u95ee"}},p={},d=[{value:"\u4e00\u3001Pod",id:"\u4e00pod",level:2},{value:"1 Pod \u6982\u8ff0",id:"1-pod-\u6982\u8ff0",level:3},{value:"1.1 Pod \u548c\u5e94\u7528\u7684\u5173\u7cfb",id:"11-pod-\u548c\u5e94\u7528\u7684\u5173\u7cfb",level:4},{value:"1.2 Pod \u548c\u5bb9\u5668\u7684\u5173\u7cfb",id:"12-pod-\u548c\u5bb9\u5668\u7684\u5173\u7cfb",level:4},{value:"1.3 Pod \u548c\u8282\u70b9\u7684\u5173\u7cfb",id:"13-pod-\u548c\u8282\u70b9\u7684\u5173\u7cfb",level:4},{value:"2 Pod \u7279\u6027",id:"2-pod-\u7279\u6027",level:3},{value:"2.1 \u8d44\u6e90\u5171\u4eab",id:"21-\u8d44\u6e90\u5171\u4eab",level:4},{value:"2.2 \u751f\u547d\u5468\u671f\u77ed\u6682",id:"22-\u751f\u547d\u5468\u671f\u77ed\u6682",level:4},{value:"2.3 \u5e73\u5766\u7684\u7f51\u7edc",id:"23-\u5e73\u5766\u7684\u7f51\u7edc",level:4},{value:"3 Pod \u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5",id:"3-pod-\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5",level:3},{value:"4 Pod \u7684\u5206\u7c7b",id:"4-pod-\u7684\u5206\u7c7b",level:3},{value:"4.1 \u666e\u901a Pod",id:"41-\u666e\u901a-pod",level:4},{value:"4.2 \u9759\u6001 Pod",id:"42-\u9759\u6001-pod",level:4},{value:"5 Pod \u7684\u751f\u547d\u5468\u671f\u548c\u91cd\u542f\u7b56\u7565",id:"5-pod-\u7684\u751f\u547d\u5468\u671f\u548c\u91cd\u542f\u7b56\u7565",level:3},{value:"5.1 Pod \u7684\u72b6\u6001",id:"51-pod-\u7684\u72b6\u6001",level:4},{value:"5.2 Pod \u7684\u91cd\u542f\u7b56\u7565",id:"52-pod-\u7684\u91cd\u542f\u7b56\u7565",level:4},{value:"5.3 \u5e38\u89c1\u72b6\u6001\u8f6c\u6362",id:"53-\u5e38\u89c1\u72b6\u6001\u8f6c\u6362",level:4},{value:"5.4 Pod \u7684\u8d44\u6e90\u914d\u7f6e",id:"54-pod-\u7684\u8d44\u6e90\u914d\u7f6e",level:4},{value:"\u4e8c\u3001Label",id:"\u4e8clabel",level:2},{value:"1 Label \u6982\u8ff0",id:"1-label-\u6982\u8ff0",level:3},{value:"\u4e09\u3001Controller \u63a7\u5236\u5668",id:"\u4e09controller-\u63a7\u5236\u5668",level:2},{value:"1 Replication Controller",id:"1-replication-controller",level:3},{value:"2 Replica Set",id:"2-replica-set",level:3},{value:"3 Deployment",id:"3-deployment",level:3},{value:"4 Horizontal Pod Autoscaler",id:"4-horizontal-pod-autoscaler",level:3},{value:"\u56db\u3001Volume",id:"\u56dbvolume",level:2},{value:"1 Volume \u6982\u8ff0",id:"1-volume-\u6982\u8ff0",level:3},{value:"2 hostPath",id:"2-hostpath",level:3},{value:"3 nfs",id:"3-nfs",level:3},{value:"\u4e94\u3001PVC \u548c PV",id:"\u4e94pvc-\u548c-pv",level:2},{value:"1 \u57fa\u672c\u6982\u5ff5",id:"1-\u57fa\u672c\u6982\u5ff5",level:3},{value:"2 \u751f\u547d\u5468\u671f",id:"2-\u751f\u547d\u5468\u671f",level:3},{value:"3 PV \u5377\u9636\u6bb5\u72b6\u6001",id:"3-pv-\u5377\u9636\u6bb5\u72b6\u6001",level:3},{value:"\u516d\u3001Secret",id:"\u516dsecret",level:2},{value:"1 Secret \u5b58\u5728\u610f\u4e49",id:"1-secret-\u5b58\u5728\u610f\u4e49",level:3},{value:"2 Secret \u7c7b\u578b",id:"2-secret-\u7c7b\u578b",level:3},{value:"3 Service Account",id:"3-service-account",level:3},{value:"4 Opaque Secret",id:"4-opaque-secret",level:3},{value:"4.1 \u521b\u5efa Secret",id:"41-\u521b\u5efa-secret",level:4},{value:"4.2 \u5c06 Secret \u6302\u8f7d\u5230 Volume \u4e2d",id:"42-\u5c06-secret-\u6302\u8f7d\u5230-volume-\u4e2d",level:4},{value:"4.3 \u5c06 Secret \u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cf",id:"43-\u5c06-secret-\u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cf",level:4},{value:"\u4e03\u3001ConfigMap",id:"\u4e03configmap",level:2},{value:"1 ConfigMap \u6982\u8ff0",id:"1-configmap-\u6982\u8ff0",level:3},{value:"2 ConfigMap \u521b\u5efa",id:"2-configmap-\u521b\u5efa",level:3},{value:"2.1 \u4f7f\u7528\u76ee\u5f55\u521b\u5efa",id:"21-\u4f7f\u7528\u76ee\u5f55\u521b\u5efa",level:4},{value:"2.2 \u4f7f\u7528\u6587\u4ef6\u521b\u5efa",id:"22-\u4f7f\u7528\u6587\u4ef6\u521b\u5efa",level:4},{value:"2.3 \u4f7f\u7528\u5b57\u9762\u91cf\u521b\u5efa",id:"23-\u4f7f\u7528\u5b57\u9762\u91cf\u521b\u5efa",level:4},{value:"3 Pod \u4e2d\u4f7f\u7528 ConfigMap",id:"3-pod-\u4e2d\u4f7f\u7528-configmap",level:3},{value:"3.1 \u4f7f\u7528 ConfigMap \u4ee3\u66ff\u73af\u5883\u53d8\u91cf",id:"31-\u4f7f\u7528-configmap-\u4ee3\u66ff\u73af\u5883\u53d8\u91cf",level:4},{value:"3.2 \u901a\u8fc7\u6570\u636e\u5377\u63d2\u4ef6\u4f7f\u7528 ConfigMap",id:"32-\u901a\u8fc7\u6570\u636e\u5377\u63d2\u4ef6\u4f7f\u7528-configmap",level:4},{value:"\u516b\u3001Namespace",id:"\u516bnamespace",level:2},{value:"1 Namespace \u6982\u8ff0",id:"1-namespace-\u6982\u8ff0",level:3},{value:"\u4e5d\u3001Service",id:"\u4e5dservice",level:2},{value:"1 Service \u6982\u8ff0",id:"1-service-\u6982\u8ff0",level:3},{value:"2 \u5916\u90e8\u670d\u52a1 Service",id:"2-\u5916\u90e8\u670d\u52a1-service",level:3},{value:"\u5341\u3001\u63a2\u9488",id:"\u5341\u63a2\u9488",level:2},{value:"1 livenessProbe\uff08\u5b58\u6d3b\u63a2\u9488\uff09",id:"1-livenessprobe\u5b58\u6d3b\u63a2\u9488",level:3},{value:"2 readinessProbe\uff08\u5c31\u7eea\u63a2\u9488\uff09",id:"2-readinessprobe\u5c31\u7eea\u63a2\u9488",level:3},{value:"3 \u63a2\u6d4b\u65b9\u6cd5",id:"3-\u63a2\u6d4b\u65b9\u6cd5",level:3},{value:"3.1 exec",id:"31-exec",level:4},{value:"3.2 httpGet",id:"32-httpget",level:4},{value:"3.3 tcpSocket",id:"33-tcpsocket",level:4},{value:"4 \u793a\u4f8b",id:"4-\u793a\u4f8b",level:3},{value:"\u5341\u4e00\u3001\u8c03\u5ea6\u5668",id:"\u5341\u4e00\u8c03\u5ea6\u5668",level:2},{value:"1 \u6982\u8ff0",id:"1-\u6982\u8ff0",level:3},{value:"2 K8S \u8c03\u5ea6\u5de5\u4f5c\u65b9\u5f0f",id:"2-k8s-\u8c03\u5ea6\u5de5\u4f5c\u65b9\u5f0f",level:3},{value:"3 K8S \u8c03\u5ea6\u5668",id:"3-k8s-\u8c03\u5ea6\u5668",level:3},{value:"3.1 \u6982\u8ff0",id:"31-\u6982\u8ff0",level:4},{value:"3.2 \u8c03\u5ea6\u6d41\u7a0b",id:"32-\u8c03\u5ea6\u6d41\u7a0b",level:4},{value:"4 \u8282\u70b9\u8d44\u6e90\u8c03\u5ea6\u4eb2\u548c\u6027",id:"4-\u8282\u70b9\u8d44\u6e90\u8c03\u5ea6\u4eb2\u548c\u6027",level:3},{value:"4.1 \u8282\u70b9\u786c\u4eb2\u548c\u6027",id:"41-\u8282\u70b9\u786c\u4eb2\u548c\u6027",level:4},{value:"4.2 \u8282\u70b9\u8f6f\u4eb2\u548c\u6027",id:"42-\u8282\u70b9\u8f6f\u4eb2\u548c\u6027",level:4},{value:"5 Pod \u8d44\u6e90\u8c03\u5ea6\u8c03\u5ea6\u4eb2\u548c\u6027",id:"5-pod-\u8d44\u6e90\u8c03\u5ea6\u8c03\u5ea6\u4eb2\u548c\u6027",level:3},{value:"5.1 Pod \u786c\u4eb2\u548c\u8c03\u5ea6",id:"51-pod-\u786c\u4eb2\u548c\u8c03\u5ea6",level:4},{value:"5.2 Pod \u8f6f\u4eb2\u548c\u8c03\u5ea6",id:"52-pod-\u8f6f\u4eb2\u548c\u8c03\u5ea6",level:4},{value:"5.3 Pod \u53cd\u4eb2\u548c\u7b56\u7565",id:"53-pod-\u53cd\u4eb2\u548c\u7b56\u7565",level:4},{value:"6 \u6c61\u70b9\u548c\u5bb9\u5fcd\u5ea6",id:"6-\u6c61\u70b9\u548c\u5bb9\u5fcd\u5ea6",level:3},{value:"6.1 \u5b9a\u4e49\u6c61\u70b9\u548c\u5bb9\u5fcd\u5ea6",id:"61-\u5b9a\u4e49\u6c61\u70b9\u548c\u5bb9\u5fcd\u5ea6",level:4},{value:"6.2 \u5b9a\u4e49\u6392\u65a5\u7b49\u7ea7",id:"62-\u5b9a\u4e49\u6392\u65a5\u7b49\u7ea7",level:4},{value:"6.3 \u5728 Pod \u4e0a\u5b9a\u4e49\u5bb9\u5fcd\u5ea6",id:"63-\u5728-pod-\u4e0a\u5b9a\u4e49\u5bb9\u5fcd\u5ea6",level:4},{value:"6.4 \u7ba1\u7406\u8282\u70b9\u4e0a\u7684\u6c61\u70b9",id:"64-\u7ba1\u7406\u8282\u70b9\u4e0a\u7684\u6c61\u70b9",level:4},{value:"6.5 \u95ee\u9898\u8282\u70b9\u6807\u8bc6",id:"65-\u95ee\u9898\u8282\u70b9\u6807\u8bc6",level:4},{value:"7 Pod \u4f18\u5148\u7ea7\u548c\u62a2\u5360\u5f0f\u8c03\u5ea6",id:"7-pod-\u4f18\u5148\u7ea7\u548c\u62a2\u5360\u5f0f\u8c03\u5ea6",level:3},{value:"8 Pod \u4f18\u5148\u7ea7\u548c\u62a2\u5360\u673a\u5236\u9ed8\u8ba4\u5904\u4e8e\u7981\u7528\u72b6\u6001",id:"8-pod-\u4f18\u5148\u7ea7\u548c\u62a2\u5360\u673a\u5236\u9ed8\u8ba4\u5904\u4e8e\u7981\u7528\u72b6\u6001",level:3},{value:"\u5341\u4e8c\u3001\u96c6\u7fa4\u5b89\u5168\u673a\u5236 RBAC",id:"\u5341\u4e8c\u96c6\u7fa4\u5b89\u5168\u673a\u5236-rbac",level:2},{value:"1 \u57fa\u672c\u6982\u5ff5",id:"1-\u57fa\u672c\u6982\u5ff5-1",level:3},{value:"2 RBAC \u7684 API \u8d44\u6e90\u5bf9\u8c61\u8bf4\u660e",id:"2-rbac-\u7684-api-\u8d44\u6e90\u5bf9\u8c61\u8bf4\u660e",level:3},{value:"2.1 Role\uff08\u89d2\u8272\uff09",id:"21-role\u89d2\u8272",level:4},{value:"2.2 ClusterRole\uff08\u96c6\u7fa4\u89d2\u8272\uff09",id:"22-clusterrole\u96c6\u7fa4\u89d2\u8272",level:4},{value:"2.3 RoleBinding\uff08\u89d2\u8272\u7ed1\u5b9a\uff09\u548c ClusterRoleBinding\uff08\u96c6\u7fa4\u89d2\u8272\u7ed1\u5b9a\uff09",id:"23-rolebinding\u89d2\u8272\u7ed1\u5b9a\u548c-clusterrolebinding\u96c6\u7fa4\u89d2\u8272\u7ed1\u5b9a",level:4},{value:"3 \u5bf9\u8d44\u6e90\u7684\u5f15\u7528\u65b9\u5f0f",id:"3-\u5bf9\u8d44\u6e90\u7684\u5f15\u7528\u65b9\u5f0f",level:3},{value:"4 \u5e38\u89c1\u7684\u89d2\u8272\u793a\u4f8b",id:"4-\u5e38\u89c1\u7684\u89d2\u8272\u793a\u4f8b",level:3},{value:"5 \u5e38\u89c1\u7684\u89d2\u8272\u7ed1\u5b9a",id:"5-\u5e38\u89c1\u7684\u89d2\u8272\u7ed1\u5b9a",level:3},{value:"6 \u9ed8\u8ba4\u7684\u89d2\u8272\u548c\u89d2\u8272\u7ed1\u5b9a",id:"6-\u9ed8\u8ba4\u7684\u89d2\u8272\u548c\u89d2\u8272\u7ed1\u5b9a",level:3},{value:"7 \u6388\u6743\u6ce8\u610f\u4e8b\u9879",id:"7-\u6388\u6743\u6ce8\u610f\u4e8b\u9879",level:3},{value:"\u9884\u9632\u63d0\u6743\u548c\u6388\u6743\u521d\u59cb\u5316",id:"\u9884\u9632\u63d0\u6743\u548c\u6388\u6743\u521d\u59cb\u5316",level:4},{value:"\u5341\u4e09\u3001\u6027\u80fd\u76d1\u63a7\u5e73\u53f0",id:"\u5341\u4e09\u6027\u80fd\u76d1\u63a7\u5e73\u53f0",level:2},{value:"1 \u6982\u8ff0",id:"1-\u6982\u8ff0-1",level:3},{value:"2 \u5c55\u793a\u51c6\u5907",id:"2-\u5c55\u793a\u51c6\u5907",level:3},{value:"2.1 \u57fa\u7840\u73af\u5883",id:"21-\u57fa\u7840\u73af\u5883",level:4},{value:"2.3 \u539f\u7406",id:"23-\u539f\u7406",level:4},{value:"2.3.1 Heapster",id:"231-heapster",level:5},{value:"2.3.2 Influxdb",id:"232-influxdb",level:5},{value:"2.3.3 Grafana",id:"233-grafana",level:5},{value:"3 \u90e8\u7f72 Kubernetes \u96c6\u7fa4\u6027\u80fd\u76d1\u63a7",id:"3-\u90e8\u7f72-kubernetes-\u96c6\u7fa4\u6027\u80fd\u76d1\u63a7",level:3},{value:"\u5341\u56db\u3001Helm",id:"\u5341\u56dbhelm",level:2},{value:"1 Helm \u5f15\u5165",id:"1-helm-\u5f15\u5165",level:3},{value:"2 Helm \u4ecb\u7ecd",id:"2-helm-\u4ecb\u7ecd",level:3},{value:"3 Helm v3 \u53d8\u5316",id:"3-helm-v3-\u53d8\u5316",level:3},{value:"4 Helm \u5ba2\u6237\u7aef",id:"4-helm-\u5ba2\u6237\u7aef",level:3},{value:"4.1 \u914d\u7f6e\u56fd\u5185 Chart \u4ed3\u5e93",id:"41-\u914d\u7f6e\u56fd\u5185-chart-\u4ed3\u5e93",level:4},{value:"4.1.1 \u6dfb\u52a0\u5b58\u50a8\u5e93",id:"411-\u6dfb\u52a0\u5b58\u50a8\u5e93",level:5},{value:"4.1.2 \u67e5\u770b\u914d\u7f6e\u7684\u5b58\u50a8\u5e93",id:"412-\u67e5\u770b\u914d\u7f6e\u7684\u5b58\u50a8\u5e93",level:5},{value:"4.1.3 \u5220\u9664\u5b58\u50a8\u5e93",id:"413-\u5220\u9664\u5b58\u50a8\u5e93",level:5},{value:"5 Helm \u57fa\u672c\u4f7f\u7528",id:"5-helm-\u57fa\u672c\u4f7f\u7528",level:3},{value:"5.1 \u4f7f\u7528 Helm \u90e8\u7f72\u4e00\u4e2a\u5e94\u7528",id:"51-\u4f7f\u7528-helm-\u90e8\u7f72\u4e00\u4e2a\u5e94\u7528",level:4},{value:"5.2 \u5b89\u88c5\u524d\u81ea\u5b9a\u4e49 Chart \u914d\u7f6e\u9009\u9879",id:"52-\u5b89\u88c5\u524d\u81ea\u5b9a\u4e49-chart-\u914d\u7f6e\u9009\u9879",level:4}],u={toc:d};function s(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"\u4e00pod"},"\u4e00\u3001Pod"),(0,l.kt)("h3",{id:"1-pod-\u6982\u8ff0"},"1 Pod \u6982\u8ff0"),(0,l.kt)("p",null,"Pod \u662f K8S \u7cfb\u7edf\u4e2d\u53ef\u4ee5\u521b\u5efa\u548c\u7ba1\u7406\u7684\u6700\u5c0f\u5355\u5143\uff0c\u662f\u8d44\u6e90\u5bf9\u8c61\u6a21\u578b\u4e2d\u6700\u5c0f\u8d44\u6e90\u5bf9\u8c61\u6a21\u578b\uff0c\u4e5f\u662f\u5728 K8S \u4e0a\u8fd0\u884c\u5bb9\u5668\u5316\u5e94\u7528\u7684\u8d44\u6e90\u5bf9\u8c61\uff0c\u5176\u5b83\u7684\u8d44\u6e90\u5bf9\u8c61\u90fd\u662f\u7528\u6765\u652f\u6491\u6216\u8005\u6269\u5c55 Pod \u5bf9\u8c61\u529f\u80fd\u7684\uff0c\u6bd4\u5982\u63a7\u5236\u5668\u5bf9\u8c61\u662f\u7528\u6765\u7ba1\u63a7 Pod \u5bf9\u8c61\u7684\uff0cService \u6216\u8005 Ingress \u8d44\u6e90\u5bf9\u8c61\u662f\u7528\u6765\u66b4\u9732 Pod \u5f15\u7528\u5bf9\u8c61\u7684\uff0cPersistentVolume \u8d44\u6e90\u5bf9\u8c61\u662f\u7528\u6765\u4e3a Pod \u63d0\u4f9b\u5b58\u50a8\u7b49\u7b49\uff0cK8S \u4e0d\u4f1a\u76f4\u63a5\u5904\u7406\u5bb9\u5668\uff0c\u800c\u662f Pod\uff0cPod \u662f\u7531\u4e00\u4e2a\u6216\u591a\u4e2a Container \u7ec4\u6210\u7684\u3002"),(0,l.kt)("p",null,'Pod \u662f Kubernetes \u7684\u6700\u91cd\u8981\u6982\u5ff5\uff0c\u6bcf\u4e00\u4e2a Pod \u90fd\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u88ab\u79f0\u4e3a "\u6839\u5bb9\u5668" \u7684 Pause \u5bb9\u5668\u3002Pause \u5bb9\u5668\u5bf9\u5e94\u7684\u955c\u50cf\u5c5e\u4e8e Kubernetes \u5e73\u53f0\u7684\u4e00\u90e8\u5206\uff0c\u9664\u4e86 Pause \u5bb9\u5668\uff0c\u6bcf\u4e2a Pod \u8fd8\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u7d27\u5bc6\u76f8\u5173\u7684\u7528\u6237\u4e1a\u52a1\u5bb9\u5668\u3002'),(0,l.kt)("h4",{id:"11-pod-\u548c\u5e94\u7528\u7684\u5173\u7cfb"},"1.1 Pod \u548c\u5e94\u7528\u7684\u5173\u7cfb"),(0,l.kt)("p",null,"\u6bcf\u4e2a Pod \u90fd\u662f\u5e94\u7528\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u6709\u4e13\u6709\u7684 IP\u3002"),(0,l.kt)("h4",{id:"12-pod-\u548c\u5bb9\u5668\u7684\u5173\u7cfb"},"1.2 Pod \u548c\u5bb9\u5668\u7684\u5173\u7cfb"),(0,l.kt)("p",null,"\u4e00\u4e2a Pod \u53ef\u4ee5\u6709\u591a\u4e2a\u5bb9\u5668\uff0c\u5f7c\u6b64\u95f4\u5171\u4eab\u7f51\u7edc\u548c\u5b58\u50a8\u8d44\u6e90\uff0c\u6bcf\u4e2a Pod \u4e2d\u6709\u4e00\u4e2a Pause \u5bb9\u5668\u4fdd\u5b58\u6240\u6709\u7684\u5bb9\u5668\u72b6\u6001\uff0c\u901a\u8fc7\u7ba1\u7406 Pause \u5bb9\u5668\uff0c\u8fbe\u5230\u7ba1\u7406 Pod \u4e2d\u6240\u6709\u5bb9\u5668\u7684\u6548\u679c\u3002"),(0,l.kt)("h4",{id:"13-pod-\u548c\u8282\u70b9\u7684\u5173\u7cfb"},"1.3 Pod \u548c\u8282\u70b9\u7684\u5173\u7cfb"),(0,l.kt)("p",null,"\u540c\u4e00\u4e2a Pod \u4e2d\u7684\u5bb9\u5668\u603b\u4f1a\u88ab\u8c03\u5ea6\u5230\u76f8\u540c\u8282\u70b9\uff0c\u4e0d\u540c\u8282\u70b9\u95f4 Pod \u7684\u901a\u4fe1\u57fa\u4e8e\u865a\u62df\u4e8c\u5c42\u7f51\u7edc\u6280\u672f\u5b9e\u73b0\u3002"),(0,l.kt)("h3",{id:"2-pod-\u7279\u6027"},"2 Pod \u7279\u6027"),(0,l.kt)("h4",{id:"21-\u8d44\u6e90\u5171\u4eab"},"2.1 \u8d44\u6e90\u5171\u4eab"),(0,l.kt)("p",null,"\u4e00\u4e2a Pod \u91cc\u7684\u591a\u4e2a\u5bb9\u5668\u53ef\u4ee5\u5171\u4eab\u5b58\u50a8\u548c\u7f51\u7edc\uff0c\u53ef\u4ee5\u770b\u505a\u4e00\u4e2a\u903b\u8f91\u7684\u4e3b\u673a\u3002\u5171\u4eab\u7684\u5982 Namespace\u3001Cgroups \u6216\u8005\u5176\u5b83\u7684\u9694\u79bb\u8d44\u6e90\u3002"),(0,l.kt)("p",null,"\u591a\u4e2a\u5bb9\u5668\u5171\u4eab\u540c\u4e00 Network Namespace\uff0c\u7531\u6b64\u5728\u4e00\u4e2a Pod \u91cc\u7684\u591a\u4e2a\u5bb9\u5668\u5171\u4eab Pod \u7684 IP \u548c\u7aef\u53e3 Namespace\uff0c\u6240\u4ee5\u4e00\u4e2a Pod \u5185\u7684\u591a\u4e2a\u5bb9\u5668\u4e4b\u95f4\u53ef\u4ee5\u901a\u8fc7 localhost \u6765\u8fdb\u884c\u901a\u4fe1\uff0c\u6240\u9700\u8981\u6ce8\u610f\u7684\u662f\u4e0d\u540c\u5bb9\u5668\u8981\u6ce8\u610f\u4e0d\u8981\u6709\u7aef\u53e3\u51b2\u7a81\u5373\u53ef\u3002\u4e0d\u540c\u7684 Pod \u6709\u4e0d\u540c\u7684 IP\uff0c\u4e0d\u540c Pod \u5185\u7684\u591a\u4e2a\u5bb9\u5668\u4e4b\u95f4\u901a\u4fe1\uff0c\u4e0d\u53ef\u4ee5\u4f7f\u7528 IPC\uff08\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u6307\u5b9a\u7684\u8bdd\uff09\u901a\u4fe1\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u4f7f\u7528 Pod \u7684 IP \u8fdb\u884c\u901a\u4fe1\u3002"),(0,l.kt)("p",null,"\u4e00\u4e2a Pod \u91cc\u7684\u591a\u4e2a\u5bb9\u5668\u53ef\u4ee5\u5171\u4eab\u5b58\u50a8\u5377\uff0c\u8fd9\u4e2a\u5b58\u50a8\u5377\u4f1a\u88ab\u5b9a\u4e49\u4e3a Pod \u7684\u4e00\u90e8\u5206\uff0c\u5e76\u4e14\u53ef\u4ee5\u6302\u8f7d\u5230\u8be5 Pod \u91cc\u7684\u6240\u6709\u5bb9\u5668\u7684\u6587\u4ef6\u7cfb\u7edf\u4e0a\u3002"),(0,l.kt)("h4",{id:"22-\u751f\u547d\u5468\u671f\u77ed\u6682"},"2.2 \u751f\u547d\u5468\u671f\u77ed\u6682"),(0,l.kt)("p",null,"Pod \u5c5e\u4e8e\u751f\u547d\u5468\u671f\u6bd4\u8f83\u77ed\u6682\u7684\u7ec4\u4ef6\uff0c\u6bd4\u5982\uff0c\u5f53 Pod \u6240\u5728\u8282\u70b9\u53d1\u751f\u6545\u969c\uff0c\u90a3\u4e48\u8be5\u8282\u70b9\u4e0a\u7684 Pod \u4f1a\u88ab\u8c03\u5ea6\u5230\u5176\u5b83\u8282\u70b9\u4e0a\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u88ab\u91cd\u65b0\u8c03\u5ea6\u7684 Pod \u662f\u4e00\u4e2a\u5168\u65b0\u7684 Pod\uff0c\u8ddf\u4e4b\u524d\u7684 Pod \u6ca1\u6709\u534a\u6bdb\u94b1\u5173\u7cfb\u3002"),(0,l.kt)("h4",{id:"23-\u5e73\u5766\u7684\u7f51\u7edc"},"2.3 \u5e73\u5766\u7684\u7f51\u7edc"),(0,l.kt)("p",null,"K8S \u96c6\u7fa4\u7684\u6240\u6709 Pod \u90fd\u5728\u540c\u4e00\u4e2a\u5171\u4eab\u7f51\u7edc\u5730\u5740\u7a7a\u95f4\u4e2d\uff0c\u4e5f\u5c31\u662f\u8bf4\u6bcf\u4e2a Pod \u90fd\u53ef\u4ee5\u901a\u8fc7\u5176\u5b83 Pod \u7684 IP \u5730\u5740\u6765\u5b9e\u73b0\u8bbf\u95ee\u3002"),(0,l.kt)("h3",{id:"3-pod-\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5"},"3 Pod \u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5"),(0,l.kt)("p",null,"\u5728 Kubernetes \u4e2d\u5bf9\u8fd0\u884c\u5bb9\u5668\u7684\u8981\u6c42\uff1a\u5bb9\u5668\u7684\u4e3b\u7a0b\u5e8f\u9700\u8981\u4e00\u76f4\u5728\u524d\u53f0\u8fd0\u884c\uff0c\u800c\u4e0d\u662f\u5728\u540e\u53f0\u8fd0\u884c\u3002\u5982\u679c\u6211\u4eec\u521b\u5efa\u7684 Docker \u955c\u50cf\u7684\u542f\u52a8\u547d\u4ee4\u662f\u540e\u53f0\u6267\u884c\u7a0b\u5e8f\uff0c\u5219\u5728 kubelet \u521b\u5efa\u5305\u542b\u8fd9\u4e2a\u5bb9\u5668\u7684 Pod \u4e4b\u540e\u8fd0\u884c\u5b8c\u8be5\u547d\u4ee4\uff0c\u5373\u8ba4\u4e3a Pod \u5df2\u7ecf\u7ed3\u675f\uff0c\u5c06\u7acb\u5373\u9500\u6bc1\u8be5 Pod\u3002\u5982\u679c\u4e3a\u8be5 Pod \u5b9a\u4e49\u4e86 RC\uff0c\u5219\u521b\u5efa\u3001\u9500\u6bc1\u4f1a\u9677\u5165\u4e00\u4e2a\u65e0\u9650\u5faa\u73af\u7684\u8fc7\u7a0b\u4e2d\u3002Pod \u53ef\u4ee5\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u7ec4\u5408\u800c\u6210\u3002"),(0,l.kt)("h3",{id:"4-pod-\u7684\u5206\u7c7b"},"4 Pod \u7684\u5206\u7c7b"),(0,l.kt)("h4",{id:"41-\u666e\u901a-pod"},"4.1 \u666e\u901a Pod"),(0,l.kt)("p",null,"\u666e\u901a Pod \u4e00\u65e6\u88ab\u521b\u5efa\uff0c\u5c31\u4f1a\u88ab\u653e\u5165\u5230 Etcd \u4e2d\u5b58\u50a8\uff0c\u968f\u540e\u4f1a\u88ab Kubernetes Master \u8c03\u5ea6\u5230\u67d0\u4e2a\u5177\u4f53\u7684 Node \u4e0a\u5e76\u8fdb\u884c\u7ed1\u5b9a\uff0c\u968f\u540e\u8be5 Pod \u5bf9\u5e94\u7684 Node \u4e0a\u7684 kubelet \u8fdb\u7a0b\u5b9e\u4f8b\u5316\u6210\u4e00\u7ec4\u76f8\u5173\u7684 Docker \u5bb9\u5668\u5e76\u542f\u52a8\u8d77\u6765\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53 Pod \u91cc\u67d0\u4e2a\u5bb9\u5668\u505c\u6b62\u65f6\uff0cKubernetes \u4f1a\u81ea\u52a8\u68c0\u6d4b\u5230\u8fd9\u4e2a\u95ee\u9898\u5e76\u4e14\u91cd\u65b0\u542f\u52a8\u8fd9\u4e2a Pod \u91cc\u7684\u6240\u6709\u5bb9\u5668\uff0c\u5982\u679c Pod \u6240\u5728\u7684 Node \u5b95\u673a\uff0c\u5219\u4f1a\u5c06\u8fd9\u4e2a Node \u4e0a\u6240\u6709 Pod \u91cd\u65b0\u8c03\u5ea6\u5230\u5176\u5b83\u8282\u70b9\u4e0a\u3002"),(0,l.kt)("h4",{id:"42-\u9759\u6001-pod"},"4.2 \u9759\u6001 Pod"),(0,l.kt)("p",null,"\u9759\u6001 Pod \u662f\u7531 kubelet \u8fdb\u884c\u7ba1\u7406\u7684\u4ec5\u5b58\u5728\u4e8e\u7279\u5b9a Node \u4e0a\u7684 Pod\uff0c\u5b83\u4eec\u4e0d\u80fd\u901a\u8fc7 API Server \u8fdb\u884c\u7ba1\u7406\uff0c\u65e0\u6cd5\u4e0e ReplicationController\u3001Deployment \u6216 DaemonSet \u8fdb\u884c\u5173\u8054\uff0c\u5e76\u4e14 kubelet \u4e5f\u65e0\u6cd5\u5bf9\u5b83\u4eec\u8fdb\u884c\u5065\u5eb7\u68c0\u67e5\u3002"),(0,l.kt)("h3",{id:"5-pod-\u7684\u751f\u547d\u5468\u671f\u548c\u91cd\u542f\u7b56\u7565"},"5 Pod \u7684\u751f\u547d\u5468\u671f\u548c\u91cd\u542f\u7b56\u7565"),(0,l.kt)("h4",{id:"51-pod-\u7684\u72b6\u6001"},"5.1 Pod \u7684\u72b6\u6001"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"\u72b6\u6001"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Pending"),(0,l.kt)("td",{parentName:"tr",align:"left"},"API Server \u5df2\u7ecf\u521b\u5efa\u4e86\u8be5 Pod\uff0c\u4f46 Pod \u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u7684\u955c\u50cf\u8fd8\u6ca1\u6709\u521b\u5efa\uff0c\u5305\u62ec\u955c\u50cf\u4e0b\u8f7d\u8fc7\u7a0b\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Running"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Pod \u5185\u6240\u6709\u5bb9\u5668\u5df2\u7ecf\u521b\u5efa\uff0c\u4e14\u81f3\u5c11\u4e00\u4e2a\u5bb9\u5668\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\u3001\u6b63\u5728\u542f\u52a8\u72b6\u6001\u6216\u6b63\u5728\u91cd\u542f\u72b6\u6001\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Completed"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Pod \u5185\u6240\u6709\u5bb9\u5668\u5747\u6210\u529f\u6267\u884c\u9000\u51fa\uff0c\u4e14\u4e0d\u4f1a\u518d\u91cd\u542f\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Failed"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Pod \u5185\u6240\u6709\u5bb9\u5668\u5747\u5df2\u9000\u51fa\uff0c\u4f46\u81f3\u5c11\u6709\u4e00\u4e2a\u5bb9\u5668\u9000\u51fa\u5931\u8d25\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Unkown"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u7531\u4e8e\u67d0\u79cd\u539f\u56e0\u65e0\u6cd5\u83b7\u53d6 Pod \u72b6\u6001\uff0c\u4f8b\u5982\u7f51\u7edc\u901a\u4fe1\u4e0d\u7545\u3002")))),(0,l.kt)("h4",{id:"52-pod-\u7684\u91cd\u542f\u7b56\u7565"},"5.2 Pod \u7684\u91cd\u542f\u7b56\u7565"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u91cd\u542f\u72b6\u6001"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Always"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5f53\u5bb9\u5668\u5931\u6548\u65f6\uff0c\u7531 kubelet \u81ea\u52a8\u91cd\u542f\u8be5\u5bb9\u5668\u3002\u9ed8\u8ba4\u503c\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"OnFailure"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5f53\u5bb9\u5668\u7ec8\u6b62\u8fd0\u884c\u4e14\u9000\u51fa\u7801\u4e0d\u4e3a 0 \u65f6\uff0c\u7531 kubelet \u81ea\u52a8\u91cd\u542f\u8be5\u5bb9\u5668\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Never"),(0,l.kt)("td",{parentName:"tr",align:null},"\u65e0\u8bba\u5bb9\u5668\u8fd0\u884c\u72b6\u6001\u5982\u4f55\uff0ckubelet \u90fd\u4e0d\u4f1a\u91cd\u542f\u8be5\u5bb9\u5668\u3002")))),(0,l.kt)("h4",{id:"53-\u5e38\u89c1\u72b6\u6001\u8f6c\u6362"},"5.3 \u5e38\u89c1\u72b6\u6001\u8f6c\u6362"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5bb9\u5668\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5f53\u524d\u72b6\u6001"),(0,l.kt)("th",{parentName:"tr",align:null},"\u53d1\u751f\u4e8b\u4ef6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u7ed3\u679c\u72b6\u6001",(0,l.kt)("br",null),"\uff08restartPolicy=Always\uff09"),(0,l.kt)("th",{parentName:"tr",align:null},"\u7ed3\u679c\u72b6\u6001",(0,l.kt)("br",null),"\uff08restartPolicy=OnFailure\uff09"),(0,l.kt)("th",{parentName:"tr",align:null},"\u7ed3\u679c\u72b6\u6001",(0,l.kt)("br",null),"\uff08restartPolicy=Never\uff09"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"Running"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5bb9\u5668\u6210\u529f\u9000\u51fa"),(0,l.kt)("td",{parentName:"tr",align:null},"Running"),(0,l.kt)("td",{parentName:"tr",align:null},"Succeeded"),(0,l.kt)("td",{parentName:"tr",align:null},"Succeeded")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"Running"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5bb9\u5668\u5931\u8d25\u9000\u51fa"),(0,l.kt)("td",{parentName:"tr",align:null},"Running"),(0,l.kt)("td",{parentName:"tr",align:null},"Running"),(0,l.kt)("td",{parentName:"tr",align:null},"Failure")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"Runing"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e00\u4e2a\u5bb9\u5668\u5931\u8d25\u9000\u51fa"),(0,l.kt)("td",{parentName:"tr",align:null},"Running"),(0,l.kt)("td",{parentName:"tr",align:null},"Running"),(0,l.kt)("td",{parentName:"tr",align:null},"Running")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"Running"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5bb9\u5668\u88ab OOM \u6740\u6389"),(0,l.kt)("td",{parentName:"tr",align:null},"Running"),(0,l.kt)("td",{parentName:"tr",align:null},"Running"),(0,l.kt)("td",{parentName:"tr",align:null},"Failure")))),(0,l.kt)("h4",{id:"54-pod-\u7684\u8d44\u6e90\u914d\u7f6e"},"5.4 Pod \u7684\u8d44\u6e90\u914d\u7f6e"),(0,l.kt)("p",null,"\u6bcf\u4e2a Pod \u90fd\u53ef\u4ee5\u5bf9\u5176\u80fd\u4f7f\u7528\u7684\u670d\u52a1\u5668\u4e0a\u7684\u8ba1\u7b97\u8d44\u6e90\u8bbe\u7f6e\u9650\u989d\uff0cKubnernetes \u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u9650\u989d\u7684\u8ba1\u7b97\u8d44\u6e90\u6709 CPU \u4e0e Memory \u4e24\u79cd\uff0c\u5176\u4e2d CPU \u7684\u8d44\u6e90\u5355\u4f4d\u4e3a CPU \u6570\u91cf\uff08\u6beb\u6838\uff09\uff0c\u662f\u4e00\u79cd\u7edd\u5bf9\u503c\u800c\u975e\u76f8\u5bf9\u503c\u3002Memory \u914d\u989d\u4e5f\u662f\u4e00\u4e2a\u7edd\u5bf9\u503c\uff0c\u5b83\u7684\u5355\u4f4d\u662f\u5185\u5b58\u5b57\u8282\u6570\u3002"),(0,l.kt)("h2",{id:"\u4e8clabel"},"\u4e8c\u3001Label"),(0,l.kt)("h3",{id:"1-label-\u6982\u8ff0"},"1 Label \u6982\u8ff0"),(0,l.kt)("p",null,"Label \u662f Kubernetes \u7cfb\u7edf\u4e2d\u53e6\u4e00\u4e2a\u6838\u5fc3\u6982\u5ff5\u3002\u4e00\u4e2a Label \u662f\u4e00\u4e2a key=value \u7684\u952e\u503c\u5bf9\uff0c\u5176\u4e2d key \u4e0e value \u7531\u7528\u6237\u81ea\u5df1\u6307\u5b9a\u3002Label \u53ef\u4ee5\u9644\u52a0\u5230\u5404\u79cd\u8d44\u6e90\u5bf9\u8c61\u4e0a\uff0c\u5982 Node\u3001Pod\u3001Service\u3001RC\uff0c\u4e00\u4e2a\u8d44\u6e90\u5bf9\u8c61\u53ef\u4ee5\u5b9a\u4e49\u4efb\u610f\u6570\u91cf\u7684 Label\uff0c\u540c\u4e00\u4e2a Label \u4e5f\u53ef\u4ee5\u88ab\u6dfb\u52a0\u5230\u4efb\u610f\u6570\u91cf\u7684\u8d44\u6e90\u5bf9\u8c61\u4e0a\uff0cLabel \u901a\u5e38\u5728\u8d44\u6e90\u5bf9\u8c61\u5b9a\u4e49\u65f6\u786e\u5b9a\uff0c\u4e5f\u53ef\u4ee5\u5728\u5bf9\u8c61\u521b\u5efa\u540e\u52a8\u6001\u6dfb\u52a0\u6216\u5220\u9664\u3002"),(0,l.kt)("p",null,"Label \u7684\u6700\u5e38\u89c1\u7684\u7528\u6cd5\u662f\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"metadata.labels")," \u5b57\u6bb5\u6765\u4e3a\u5bf9\u8c61\u6dfb\u52a0 Label\uff0c\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"spec.selector")," \u6765\u5f15\u7528\u5bf9\u8c61\u3002"),(0,l.kt)("p",null,"Label \u9644\u52a0\u5230 Kubernetes \u96c6\u7fa4\u4e2d\u5404\u79cd\u8d44\u6e90\u5bf9\u8c61\u4e0a\uff0c\u76ee\u7684\u5c31\u662f\u5bf9\u8fd9\u4e9b\u8d44\u6e90\u5bf9\u8c61\u8fdb\u884c\u5206\u7ec4\u7ba1\u7406\uff0c\u800c\u5206\u7ec4\u7ba1\u7406\u7684\u6838\u5fc3\u5c31\u662f Label Selector\u3002Label \u548c Label Selector \u90fd\u4e0d\u80fd\u5355\u72ec\u5b9a\u4e49\uff0c\u5fc5\u987b\u9644\u52a0\u5728\u4e00\u4e9b\u8d44\u6e90\u5bf9\u8c61\u7684\u5b9a\u4e49\u6587\u4ef6\u4e0a\uff0c\u4e00\u822c\u9644\u52a0\u5728 RC \u548c Service \u7684\u8d44\u6e90\u5b9a\u4e49\u6587\u4ef6\u4e2d\u3002"),(0,l.kt)("h2",{id:"\u4e09controller-\u63a7\u5236\u5668"},"\u4e09\u3001Controller \u63a7\u5236\u5668"),(0,l.kt)("h3",{id:"1-replication-controller"},"1 Replication Controller"),(0,l.kt)("p",null,"Replication Controller\uff08RC\uff09\u662f Kubernetes \u7cfb\u7edf\u4e2d\u6838\u5fc3\u6982\u5ff5\u4e4b\u4e00\uff0c\u5f53\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a RC \u5e76\u63d0\u4ea4\u5230 Kubernetes \u96c6\u7fa4\u4e2d\u4ee5\u540e\uff0cMaster \u8282\u70b9\u4e0a\u7684 Controller Manager \u7ec4\u4ef6\u5c31\u5f97\u5230\u901a\u77e5\uff0c\u5b9a\u671f\u68c0\u67e5\u7cfb\u7edf\u4e2d\u5b58\u6d3b\u7684 Pod\uff0c\u5e76\u786e\u5b9a\u76ee\u6807 Pod \u5b9e\u4f8b\u7684\u6570\u91cf\u521a\u597d\u7b49\u4e8e RC \u7684\u9884\u671f\u503c\uff0c\u5982\u679c\u6709\u8fc7\u591a\u6216\u8fc7\u5c11\u7684 Pod \u8fd0\u884c\uff0c\u7cfb\u7edf\u5c31\u4f1a\u505c\u6389\u6216\u521b\u5efa\u4e00\u4e9b Pod\u3002\u6b64\u5916\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539 RC \u7684\u526f\u672c\u6570\u91cf\uff0c\u6765\u5b9e\u73b0 Pod \u7684\u52a8\u6001\u7f29\u653e\u529f\u80fd\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl scale rc nginx --replicas=5\n")),(0,l.kt)("p",null,"\u7531\u4e8e Replication Controller \u4e0e Kubernetes \u4ee3\u7801\u4e2d\u7684\u6a21\u5757 Replication Controller \u540c\u540d\uff0c\u6240\u4ee5\u5728 Kubernetes v1.2 \u65f6\uff0c\u5b83\u5c31\u5347\u7ea7\u6210\u4e86\u53e6\u5916\u4e00\u4e2a\u65b0\u7684\u6982\u5ff5 Replica Set\uff0c\u5b98\u65b9\u89e3\u91ca\u4e3a\u4e0b\u4e00\u4ee3\u7684 RC\uff0c\u5b83\u4e0e RC \u7684\u533a\u522b\u662f\uff1aReplica Set \u662f\u57fa\u4e8e\u96c6\u5408\u7684 Label Selector\uff0c\u800c RC \u53ea\u652f\u6301\u57fa\u4e8e\u7b49\u5f0f\u7684 Label Selector\u3002\u6211\u4eec\u5f88\u5c11\u5355\u72ec\u4f7f\u7528 Replica Set\uff0c\u5b83\u4e3b\u8981\u88ab Deployment \u8fd9\u4e2a\u66f4\u9ad8\u5c42\u9762\u7684\u8d44\u6e90\u5bf9\u8c61\u6240\u4f7f\u7528\uff0c\u4ece\u800c\u5f62\u6210\u4e00\u6574\u5957 Pod \u521b\u5efa\u3001\u5220\u9664\u3001\u66f4\u65b0\u7684\u7f16\u6392\u673a\u5236\u3002\u6700\u597d\u4e0d\u597d\u8d8a\u8fc7 RC \u76f4\u63a5\u521b\u5efa Pod\uff0c\u56e0\u4e3a Replication Controller \u4f1a\u901a\u8fc7 RC \u7ba1\u7406 Pod \u526f\u672c\uff0c\u5b9e\u73b0\u81ea\u52a8\u521b\u5efa\u3001\u8865\u8db3\u3001\u66ff\u6362\u3001\u5220\u9664 Pod \u526f\u672c\uff0c\u8fd9\u6837\u5c31\u80fd\u63d0\u9ad8\u5e94\u7528\u7684\u5bb9\u707e\u80fd\u529b\uff0c\u51cf\u5c11\u7531\u4e8e\u8282\u70b9\u5d29\u6e83\u7b49\u610f\u5916\u72b6\u51b5\u9020\u6210\u7684\u635f\u5931\u3002\u5373\u4f7f\u5e94\u7528\u7a0b\u5e8f\u53ea\u6709\u4e00\u4e2a Pod \u526f\u672c\uff0c\u4e5f\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528 RC \u6765\u5b9a\u4e49 Pod\u3002"),(0,l.kt)("h3",{id:"2-replica-set"},"2 Replica Set"),(0,l.kt)("p",null,"Replica Set \u8ddf Replication Controller \u6ca1\u6709\u672c\u8d28\u7684\u4e0d\u540c\uff0c\u53ea\u662f\u540d\u5b57\u4e0d\u4e00\u6837\uff0c\u5e76\u4e14 Replica Set \u652f\u6301\u96c6\u5408\u5f0f\u7684 Selector\u3002Kubernetes \u5b98\u65b9\u5f3a\u70c8\u5efa\u8bae\u907f\u514d\u76f4\u63a5\u4f7f\u7528 Replica Set\uff0c\u800c\u5e94\u8be5\u901a\u8fc7 Deployment \u6765\u521b\u5efa RS \u548c Pod\u3002\u7531\u4e8e Replica Set \u662f Replication Controller \u7684\u4ee3\u66ff\u7269\uff0c\u56e0\u6b64\u7528\u6cd5\u57fa\u672c\u76f8\u540c\uff0c\u552f\u4e00\u7684\u533a\u522b\u5728\u4e8e Replica Set \u652f\u6301\u96c6\u5408\u5f0f\u7684 Selector\u3002"),(0,l.kt)("h3",{id:"3-deployment"},"3 Deployment"),(0,l.kt)("p",null,"Deployment \u662f Kubernetes v1.2 \u5f15\u5165\u7684\u65b0\u6982\u5ff5\uff0c\u5f15\u5165\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u66f4\u597d\u7684\u89e3\u51b3 Pod \u7684\u7f16\u6392\u95ee\u9898\uff0cDeployment \u5185\u90e8\u4f7f\u7528\u4e86 Replica Set \u6765\u5b9e\u73b0\u3002Deployment \u7684\u5b9a\u4e49\u4e0e Replica Set \u7684\u5b9a\u4e49\u5f88\u7c7b\u4f3c\uff0c\u9664\u4e86 API \u58f0\u660e\u4e0e kind \u7c7b\u578b\u6709\u6240\u533a\u522b\u3002"),(0,l.kt)("h3",{id:"4-horizontal-pod-autoscaler"},"4 Horizontal Pod Autoscaler"),(0,l.kt)("p",null,"Horizontal Pod Autoscaler\uff08Pod \u6a2a\u5411\u6269\u5bb9\uff0c\u7b80\u79f0 HPA\uff09\u4e0e RC\u3001Deployment \u4e00\u6837\uff0c\u4e5f\u5c5e\u4e8e\u4e00\u79cd Kunernetes \u8d44\u6e90\u5bf9\u8c61\u3002\u901a\u8fc7\u8ffd\u8e2a\u5206\u4e1c\u897f PC \u63a7\u5236\u5668\u7684\u6240\u6709\u76ee\u6807 Pod \u7684\u8d1f\u8f7d\u53d8\u5316\u60c5\u51b5\uff0c\u6765\u786e\u5b9a\u662f\u5426\u9700\u8981\u9488\u5bf9\u6027\u5730\u8c03\u6574\u76ee\u6807 Pod \u7684\u526f\u672c\u6570\uff0c\u8fd9\u662f HPA \u7684\u5b9e\u73b0\u539f\u7406\u3002"),(0,l.kt)("p",null,"Kubernetes \u5bf9 Pod \u6269\u5bb9\u4e0e\u7f29\u5bb9\u63d0\u4f9b\u4e86\u624b\u52a8\u548c\u81ea\u52a8\u4e24\u79cd\u6a21\u5f0f\uff0c\u624b\u52a8\u6a21\u5f0f\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"kubectl scale")," \u547d\u4ee4\u5bf9\u4e00\u4e2a Deployment/RC \u8fdb\u884c\u526f\u672c\u6570\u91cf\u7684\u8bbe\u7f6e\u3002\u81ea\u52a8\u6a21\u5f0f\u5219\u9700\u8981\u6839\u636e\u67d0\u4e2a\u6027\u80fd\u6307\u6807\u6216\u8005\u81ea\u5b9a\u4e49\u4e1a\u52a1\u6307\u6807\uff0c\u5e76\u6307\u5b9a Pod \u526f\u672c\u6570\u91cf\u7684\u8303\u56f4\uff0c\u7cfb\u7edf\u5c06\u81ea\u52a8\u5728\u8fd9\u4e2a\u8303\u56f4\u5185\u6839\u636e\u6027\u80fd\u6307\u6807\u7684\u53d8\u5316\u8fdb\u884c\u8c03\u6574\u3002"),(0,l.kt)("h2",{id:"\u56dbvolume"},"\u56db\u3001Volume"),(0,l.kt)("h3",{id:"1-volume-\u6982\u8ff0"},"1 Volume \u6982\u8ff0"),(0,l.kt)("p",null,"Volume \u662f Pod \u4e2d\u80fd\u591f\u88ab\u591a\u4e2a\u5bb9\u5668\u8bbf\u95ee\u7684\u5171\u4eab\u76ee\u5f55\u3002Kubernetes \u7684 Volume \u5b9a\u4e49\u5728 Pod \u4e0a\uff0c\u5b83\u88ab\u4e00\u4e2a Pod \u4e2d\u7684\u591a\u4e2a\u5bb9\u5668\u6302\u8f7d\u5230\u5177\u4f53\u7684\u6587\u4ef6\u76ee\u5f55\u4e0b\u3002Volume \u4e0e Pod \u7684\u751f\u547d\u5468\u671f\u76f8\u540c\uff0c\u4f46\u4e0e\u5bb9\u5668\u7684\u58f0\u660e\u5468\u671f\u4e0d\u76f8\u5173\uff0c\u5f53\u5bb9\u5668\u7ec8\u6b62\u6216\u91cd\u542f\u65f6\uff0cVolume \u4e2d\u7684\u6570\u636e\u4e5f\u4e0d\u4f1a\u4e22\u5931\u3002"),(0,l.kt)("p",null,"\u8981\u4f7f\u7528 Volume\uff0cPod \u9700\u8981\u6307\u5b9a Volume \u7684\u7c7b\u578b\u548c\u5185\u5bb9\uff0c\u548c\u6620\u5c04\u5230\u5bb9\u5668\u7684\u4f4d\u7f6e\u3002"),(0,l.kt)("p",null,"Kubernetes \u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684 Volume\u3002emptyDir \u7c7b\u578b\u7684 Volume \u521b\u5efa\u4e8e Pod \u88ab\u8c03\u5ea6\u5230\u67d0\u4e2a\u5bbf\u4e3b\u673a\u7684\u65f6\u5019\uff0c\u800c\u540c\u4e00\u4e2a Pod \u5185\u7684\u5bb9\u5668\u90fd\u80fd\u8bfb\u5199 emptyDir \u4e2d\u7684\u540c\u4e00\u4e2a\u6587\u4ef6\u3002\u4e00\u65e6\u8fd9\u4e2a Pod \u79bb\u5f00\u4e86\u8fd9\u4e2a\u5bbf\u4e3b\u673a\uff0cEmptyDir \u4e2d\u7684\u6570\u636e\u5c31\u4f1a\u88ab\u6c38\u4e45\u5220\u9664\u3002\u6240\u4ee5\u76ee\u524d emptyDir \u7c7b\u578b\u7684 Volume \u4e3b\u8981\u7528\u4f5c\u4e34\u65f6\u7a7a\u95f4\uff0c\u6bd4\u5982 Web \u670d\u52a1\u5668\u5199\u65e5\u5fd7\u6216\u8005 tmp \u6587\u4ef6\u9700\u8981\u7684\u4e34\u65f6\u76ee\u5f55\u3002"),(0,l.kt)("h3",{id:"2-hostpath"},"2 hostPath"),(0,l.kt)("p",null,"hostPath \u7c7b\u578b\u7684 Volume \u4f7f\u5f97\u5bf9\u5e94\u7684\u5bb9\u5668\u80fd\u591f\u8bbf\u95ee\u5f53\u524d\u5bbf\u4e3b\u673a\u4e0a\u7684\u6307\u5b9a\u76ee\u5f55\u3002\u4f8b\u5982\uff0c\u9700\u8981\u8fd0\u884c\u4e00\u4e2a\u8bbf\u95ee Docker \u7cfb\u7edf\u76ee\u5f55\u7684\u5bb9\u5668\uff0c\u90a3\u4e48\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"/var/lib/mysql")," \u76ee\u5f55\u4f5c\u4e3a\u4e00\u4e2a hostPath \u7c7b\u578b\u7684 Volume\u3002\u4e00\u65e6\u8fd9\u4e2a Pod \u79bb\u5f00\u4e86\u8fd9\u4e2a\u5bbf\u4e3b\u673a\uff0chostPath \u4e2d\u7684\u6570\u636e\u867d\u7136\u4e0d\u4f1a\u6c38\u4e45\u5220\u9664\uff0c\u4f46\u6570\u636e\u4e5f\u4e0d\u4f1a\u968f Pod \u8fc1\u79fb\u5230\u5176\u5b83\u5bbf\u4e3b\u673a\u4e0a\u3002\u56e0\u6b64\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u5404\u4e2a\u5bbf\u4e3b\u673a\u4e0a\u7684\u6587\u4ef6\u7cfb\u7edf\u7ed3\u6784\u548c\u5185\u5bb9\u5e76\u4e0d\u5b8c\u5168\u76f8\u540c\uff0c\u6240\u6709\u76f8\u540c Pod \u7684 hostPath \u53ef\u80fd\u4f1a\u5728\u4e0d\u540c\u7684\u5bbf\u4e3b\u673a\u548c\u662f\u54ea\u4e2a\u8868\u73b0\u51fa\u4e0d\u540c\u7684\u884c\u4e3a\u3002"),(0,l.kt)("h3",{id:"3-nfs"},"3 nfs"),(0,l.kt)("p",null,"nfs \u7c7b\u578b\u7684 Volume \u5141\u8bb8\u4e00\u5757\u73b0\u6709\u7684\u7f51\u7edc\u786c\u76d8\u5728\u540c\u4e00\u4e2a Pod \u5185\u7684\u5bb9\u5668\u95f4\u5171\u4eab\u3002"),(0,l.kt)("h2",{id:"\u4e94pvc-\u548c-pv"},"\u4e94\u3001PVC \u548c PV"),(0,l.kt)("h3",{id:"1-\u57fa\u672c\u6982\u5ff5"},"1 \u57fa\u672c\u6982\u5ff5"),(0,l.kt)("p",null,"\u7ba1\u7406\u5b58\u50a8\u662f\u7ba1\u7406\u8ba1\u7b97\u7684\u4e00\u4e2a\u660e\u663e\u95ee\u9898\u3002\u8be5 PersistentVolume \u5b50\u7cfb\u7edf\u4e3a\u7528\u6237\u548c\u7ba1\u7406\u5458\u63d0\u4f9b\u4e86\u4e00\u4e2a API\uff0c\u7528\u4e8e\u62bd\u8c61\u5982\u4f55\u6839\u636e\u6d88\u8d39\u65b9\u5f0f\u63d0\u4f9b\u5b58\u50a8\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u4e24\u4e2a\u65b0\u7684 API \u8d44\u6e90\uff1aPersistentVolumeClaim \u548c PersistentVolume\u3002"),(0,l.kt)("p",null,"PersistentVolume\uff08PV\uff09\u662f\u96c6\u7fa4\u4e2d\u7531\u7ba1\u7406\u5458\u914d\u7f6e\u7684\u4e00\u6bb5\u7f51\u7edc\u5b58\u50a8\u3002\u5b83\u662f\u96c6\u7fa4\u4e2d\u7684\u8d44\u6e90\uff0c\u5c31\u50cf\u8282\u70b9\u662f\u96c6\u7fa4\u8d44\u6e90\u4e00\u6837\u3002PV \u662f\u5bb9\u91cf\u63d2\u4ef6\uff0c\u5982 Volumes\uff0c\u4f46\u5176\u751f\u547d\u5468\u671f\u72ec\u7acb\u4e8e\u4f7f\u7528 PV \u7684\u4efb\u52a1\u5355\u4e2a Pod\u3002\u6b64 API \u5bf9\u8c61\u6355\u83b7\u5b58\u50a8\u5b9e\u73b0\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec nfs\u3001iscsi \u6216\u7279\u5b9a\u4e8e\u4e91\u63d0\u4f9b\u7a0b\u5e8f\u7684\u5b58\u50a8\u7cfb\u7edf\u3002"),(0,l.kt)("p",null,"PersistentVolumeClaim\uff08PVC\uff09\u662f\u7531\u7528\u6237\u8fdb\u884c\u5b58\u50a8\u7684\u8bf7\u6c42\u3002\u5b83\u7c7b\u4f3c\u4e8e Pod\uff0cPod \u6d88\u8017\u8282\u70b9\u8d44\u6e90\uff0cPVC \u6d88\u8017 PV \u8d44\u6e90\uff0cPod \u53ef\u4ee5\u8bf7\u6c42\u7279\u5b9a\u7ea7\u522b\u7684\u8d44\u6e90\uff08CPU \u548c\u5185\u5b58\uff09\uff0cClaim \u53ef\u4ee5\u8bf7\u6c42\u7279\u5b9a\u7684\u5927\u5c0f\u548c\u8bbf\u95ee\u6a21\u5f0f\uff08\u5982\u4e00\u6b21\u8bfb\u5199\u6216\u591a\u6b21\u53ea\u8bfb\uff09\u3002"),(0,l.kt)("p",null,"\u867d\u7136 PersistentVolumeClaim \u5141\u8bb8\u7528\u6237\u4f7f\u7528\u62bd\u8c61\u5b58\u50a8\u8d44\u6e90\uff0c\u4f46\u662f PersistentVolume \u5bf9\u4e8e\u4e0d\u540c\u7684\u95ee\u9898\uff0c\u7528\u6237\u901a\u5e38\u9700\u8981\u5177\u6709\u4e0d\u540c\u5c5e\u6027\uff08\u4f8b\u5982\u6027\u80fd\uff09\u3002\u96c6\u7fa4\u7ba1\u7406\u5458\u9700\u8981\u80fd\u591f\u63d0\u4f9b\u5404\u79cd PersistentVolume \u4e0d\u540c\u7684\u65b9\u5f0f\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u5927\u5c0f\u548c\u8bbf\u95ee\u6a21\u5f0f\uff0c\u800c\u4e0d\u4f1a\u8ba9\u7528\u6237\u4e86\u89e3\u8fd9\u4e9b\u5377\u7684\u5b9e\u73b0\u65b9\u5f0f\u3002\u5bf9\u4e8e\u8fd9\u4e9b\u9700\u6c42\uff0c\u6709 StorageClass \u8d44\u6e90\u3002"),(0,l.kt)("p",null,'StorageClass \u4e3a\u7ba1\u7406\u5458\u63d0\u4f9b\u4e86\u4e00\u79cd\u63cf\u8ff0\u5b83\u4eec\u7684\u5b58\u50a8\u7684 "\u7c7b" \u7684\u65b9\u6cd5\u3002\u4e0d\u540c\u7684\u7c7b\u53ef\u80fd\u6620\u5c04\u5230\u670d\u52a1\u8d28\u91cf\u7ea7\u522b\uff0c\u6216\u5907\u4efd\u7b56\u7565\uff0c\u6216\u8005\u7531\u96c6\u7fa4\u7ba1\u7406\u5458\u786e\u5b9a\u7684\u4efb\u610f\u7b56\u7565\u3002'),(0,l.kt)("p",null,"PVC \u548c PV \u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u3002"),(0,l.kt)("h3",{id:"2-\u751f\u547d\u5468\u671f"},"2 \u751f\u547d\u5468\u671f"),(0,l.kt)("p",null,"PV \u662f\u96c6\u7fa4\u4e2d\u7684\u8d44\u6e90\uff0cPVC \u5bf9\u8fd9\u4e9b\u8d44\u6e90\u7684\u8bf7\u6c42\uff0c\u5e76\u4e14\u8fd8\u5145\u5f53\u5bf9\u8d44\u6e90\u7684\u68c0\u67e5\u3002PV \u548c PVC \u4e4b\u95f4\u7684\u76f8\u4e92\u4f5c\u7528\u9075\u5faa\u4ee5\u4e0b\u751f\u547d\u5468\u671f\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Provissioning\uff1a\u901a\u8fc7\u96c6\u7fa4\u5916\u7684\u5b58\u50a8\u7cfb\u7edf\u6216\u8005\u4e91\u5e73\u53f0\u6765\u63d0\u4f9b\u6301\u4e45\u5316\u652f\u6301\u3002",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u9759\u6001\u63d0\u4f9b\uff1a\u96c6\u7fa4\u7ba1\u7406\u5458\u521b\u5efa\u591a\u4e2a PV\uff0c\u5b83\u4eec\u643a\u5e26\u53ef\u4f9b\u96c6\u7fa4\u7528\u6237\u4f7f\u7528\u7684\u771f\u5b9e\u5b58\u50a8\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5b83\u4eec\u5b58\u5728\u4e8e Kubnernetes API \u4e2d\uff0c\u53ef\u7528\u4e8e\u6d88\u8d39\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u52a8\u6001\u63d0\u4f9b\uff1a\u5f53\u96c6\u7fa4\u7ba1\u7406\u5458\u521b\u5efa\u7684\u9759\u6001 PV \u90fd\u4e0d\u5339\u914d\u7528\u6237\u7684 PVC \u65f6\uff0c\u96c6\u7fa4\u53ef\u80fd\u4f1a\u5c1d\u8bd5\u4e3a PVC \u52a8\u6001\u914d\u7f6e\u5377\u3002\u6b64\u914d\u7f6e\u57fa\u4e8e StorageClass\uff0cPVC \u5fc5\u987b\u8bf7\u6c42\u4e00\u4e2a\u7c7b\uff0c\u5e76\u4e14\u7ba1\u7406\u5458\u5fc5\u987b\u5df2\u521b\u5efa\u5e76\u914d\u7f6e\u8be5\u7c7b\u624d\u80fd\u8fdb\u884c\u52a8\u6001\u914d\u7f6e\u3002"))),(0,l.kt)("li",{parentName:"ol"},"Binding\uff1a\u7528\u6237\u521b\u5efa PVC \u5e76\u6307\u5b9a\u9700\u8981\u7684\u8d44\u6e90\u548c\u8bbf\u95ee\u6a21\u5f0f\uff0c\u5728\u627e\u5230\u53ef\u7528 PV \u4e4b\u524d\uff0cPVC \u4f1a\u4fdd\u6301\u672a\u7ed1\u5b9a\u72b6\u6001\u3002"),(0,l.kt)("li",{parentName:"ol"},"Using\uff1a\u7528\u6237\u53ef\u5728 Pod \u4e2d\u50cf\u4f7f\u7528 Volume \u4e00\u6837\u4f7f\u7528 PVC\u3002"),(0,l.kt)("li",{parentName:"ol"},'Releasing\uff1a\u7528\u6237\u5220\u9664 PVC \u6765\u56de\u6536\u5b58\u50a8\u8d44\u6e90\uff0cPV \u5c06\u53d8\u6210 "Released" \u72b6\u6001\u3002\u7531\u4e8e\u8fd8\u4fdd\u7559\u7740\u4e4b\u524d\u7684\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u9700\u8981\u6839\u636e\u4e0d\u540c\u7684\u7b56\u7565\u6765\u5904\u7406\uff0c\u5426\u5219\u8fd9\u4e9b\u5b58\u50a8\u8d44\u6e90\u65e0\u6cd5\u88ab\u5176\u5b83 PVC \u4f7f\u7528\u3002'),(0,l.kt)("li",{parentName:"ol"},"Recycling\uff1aPV \u53ef\u4ee5\u8bbe\u7f6e\u4e09\u79cd\u56de\u6536\u7b56\u7565\u3002",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Retain\uff08\u4fdd\u7559\u7b56\u7565\uff09\uff1a\u5141\u8bb8\u4eba\u5de5\u5904\u7406\u4fdd\u7559\u7684\u6570\u636e\u3002"),(0,l.kt)("li",{parentName:"ul"},"Delete\uff08\u5220\u9664\u7b56\u7565\uff09\uff1a\u5c06\u5220\u9664 PV \u548c\u5916\u90e8\u5173\u8054\u7684\u5b58\u50a8\u8d44\u6e90\uff0c\u9700\u8981\u63d2\u4ef6\u652f\u6301\u3002"),(0,l.kt)("li",{parentName:"ul"},"Recycle\uff08\u56de\u6536\u7b56\u7565\uff09\uff1a\u5c06\u6267\u884c\u6e05\u9664\u64cd\u4f5c\uff0c\u4e4b\u540e\u53ef\u4ee5\u88ab\u65b0\u7684 PVC \u4f7f\u7528\uff0c\u9700\u8981\u63d2\u4ef6\u652f\u6301\u3002")))),(0,l.kt)("h3",{id:"3-pv-\u5377\u9636\u6bb5\u72b6\u6001"},"3 PV \u5377\u9636\u6bb5\u72b6\u6001"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u72b6\u6001"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Availble"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8d44\u6e90\u5c1a\u672a\u88ab Claim \u4f7f\u7528\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Bound"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5377\u5df2\u7ecf\u7ed1\u5b9a\u5230 Claim \u4e86\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Released"),(0,l.kt)("td",{parentName:"tr",align:null},"Claim \u88ab\u5220\u9664\uff0c\u5377\u5904\u4e8e\u91ca\u653e\u72b6\u6001\uff0c\u4f46\u672a\u88ab\u96c6\u7fa4\u56de\u6536\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Failed"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5377\u81ea\u52a8\u56de\u6536\u5931\u8d25\u3002")))),(0,l.kt)("h2",{id:"\u516dsecret"},"\u516d\u3001Secret"),(0,l.kt)("h3",{id:"1-secret-\u5b58\u5728\u610f\u4e49"},"1 Secret \u5b58\u5728\u610f\u4e49"),(0,l.kt)("p",null,"Secret \u89e3\u51b3\u4e86\u5bc6\u7801\u3001Token\u3001\u79d8\u94a5\u7b49\u654f\u611f\u6570\u636e\u7684\u914d\u7f6e\u95ee\u9898\uff0c\u800c\u4e0d\u9700\u8981\u5427\u8fd9\u4e9b\u654f\u611f\u6570\u636e\u66b4\u9732\u5230\u955c\u50cf\u6216\u8005 Pod Spec \u4e2d\u3002Secret \u53ef\u4ee5\u4ee5 Volume \u6216\u8005\u73af\u5883\u53d8\u91cf\u7684\u65b9\u5f0f\u4f7f\u7528\u3002"),(0,l.kt)("h3",{id:"2-secret-\u7c7b\u578b"},"2 Secret \u7c7b\u578b"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Service Account"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7528\u6765\u8bbf\u95ee Kubernetes API\uff0c\u7531 Kubernetes \u81ea\u52a8\u521b\u5efa\uff0c\u5e76\u4e14\u4f1a\u81ea\u52a8\u6302\u8f7d\u5230 Pod \u7684 ",(0,l.kt)("inlineCode",{parentName:"td"},"/run/secrets/kubernetes.io/serviceaccount")," \u76ee\u5f55\u4e2d\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Opaque"),(0,l.kt)("td",{parentName:"tr",align:null},"base64 \u7f16\u7801\u683c\u5f0f\u7684 Secret\uff0c\u7528\u6765\u5b58\u50a8\u5bc6\u7801\u3001\u79d8\u94a5\u7b49\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"kubernetes.io/dockerconfigjson"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7528\u6765\u5b58\u50a8\u79c1\u6709 docker registry \u7684\u8ba4\u8bc1\u4fe1\u606f\u3002")))),(0,l.kt)("h3",{id:"3-service-account"},"3 Service Account"),(0,l.kt)("p",null,"Service Account \u7528\u6765\u8bbf\u95ee Kunernetes API\uff0c\u7531 Kunernetes \u81ea\u52a8\u521b\u5efa\uff0c\u5e76\u4e14\u4f1a\u81ea\u52a8\u6302\u8f7d\u5230 Pod \u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"/run/secrets/kubernetes.io/serviceaccount")," \u76ee\u5f55\u4e2d\u3002"),(0,l.kt)("h3",{id:"4-opaque-secret"},"4 Opaque Secret"),(0,l.kt)("h4",{id:"41-\u521b\u5efa-secret"},"4.1 \u521b\u5efa Secret"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"echo -n 'admin' | base64\n\necho -n 'admin123456' | base64\n\ncat <<- EOF > secret.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: my-secret\ntype: Opaque\ndata:\n  username: YWRtaW4=\n  password: YWRtaW4xMjM0NTY=\nEOF\n")),(0,l.kt)("h4",{id:"42-\u5c06-secret-\u6302\u8f7d\u5230-volume-\u4e2d"},"4.2 \u5c06 Secret \u6302\u8f7d\u5230 Volume \u4e2d"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: Pod\nmetadata:\n  name: secret-test\nspec:\n  containers:\n    - name: secret-test\n      image: my-app:0.0.1\n      volumeMounts:\n        - mountPath: /my-secret\n          name: my-secret\n  volumes:\n    - name: my-secret\n      secret:\n        secretName: my-secret\n")),(0,l.kt)("h4",{id:"43-\u5c06-secret-\u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cf"},"4.3 \u5c06 Secret \u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: Pod\nmetadata:\n  name: secret-test\nspec:\n  containers:\n    - name: secret-test\n      image: my-app:0.0.1\n      env:\n        - name: USERNAME\n          valueFrom:\n            secretKeyRef:\n              name: my-secret\n              key: username\n")),(0,l.kt)("h2",{id:"\u4e03configmap"},"\u4e03\u3001ConfigMap"),(0,l.kt)("h3",{id:"1-configmap-\u6982\u8ff0"},"1 ConfigMap \u6982\u8ff0"),(0,l.kt)("p",null,"ConfigMap \u529f\u80fd\u5728 Kubernetes 1.2 \u7248\u672c\u4e2d\u5f15\u5165\uff0c\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u4f1a\u4ece\u914d\u7f6e\u6587\u4ef6\u3001\u547d\u4ee4\u884c\u53c2\u6570\u6216\u73af\u5883\u53d8\u91cf\u4e2d\u8bfb\u53d6\u914d\u7f6e\u4fe1\u606f\u3002ConfigMap \u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u5411\u5bb9\u5668\u6ce8\u5165\u914d\u7f6e\u4fe1\u606f\u7684\u673a\u5236\uff0cConfigMap \u53ef\u4ee5\u88ab\u7528\u6765\u4fdd\u5b58\u5355\u4e2a\u5c5e\u6027\uff0c\u4e5f\u53ef\u4ee5\u7528\u6765\u4fdd\u5b58\u6574\u4e2a\u914d\u7f6e\u6587\u4ef6\u6216\u8005 JSON \u4e8c\u8fdb\u5236\u5927\u5bf9\u8c61\u3002"),(0,l.kt)("h3",{id:"2-configmap-\u521b\u5efa"},"2 ConfigMap \u521b\u5efa"),(0,l.kt)("h4",{id:"21-\u4f7f\u7528\u76ee\u5f55\u521b\u5efa"},"2.1 \u4f7f\u7528\u76ee\u5f55\u521b\u5efa"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--from-file")," \u6307\u5b9a\u5728\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u90fd\u4f1a\u88ab\u7528\u5728 ConfigMap \u91cc\u9762\u521b\u5efa\u4e00\u4e2a\u952e\u503c\u5bf9\uff0c\u952e\u7684\u540d\u5b57\u5c31\u662f\u6587\u4ef6\u540d\uff0c\u503c\u5c31\u662f\u6587\u4ef6\u7684\u5185\u5bb9\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl create configmap game-config --from-file=docs/user-guide/configmap\n")),(0,l.kt)("h4",{id:"22-\u4f7f\u7528\u6587\u4ef6\u521b\u5efa"},"2.2 \u4f7f\u7528\u6587\u4ef6\u521b\u5efa"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"--from-file")," \u8fd9\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f7f\u7528\u591a\u6b21\uff0c\u6548\u679c\u8ddf\u6307\u5b9a\u6574\u4e2a\u76ee\u5f55\u662f\u4e00\u6837\u7684\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl create configmap game-config --from-file=docs/user-guide/configmap/game.properteis\n")),(0,l.kt)("h4",{id:"23-\u4f7f\u7528\u5b57\u9762\u91cf\u521b\u5efa"},"2.3 \u4f7f\u7528\u5b57\u9762\u91cf\u521b\u5efa"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl create configmap special-config \\\n    --from-literal=special.how=very \\\n    --from-literal=special.type=charm\n")),(0,l.kt)("h3",{id:"3-pod-\u4e2d\u4f7f\u7528-configmap"},"3 Pod \u4e2d\u4f7f\u7528 ConfigMap"),(0,l.kt)("h4",{id:"31-\u4f7f\u7528-configmap-\u4ee3\u66ff\u73af\u5883\u53d8\u91cf"},"3.1 \u4f7f\u7528 ConfigMap \u4ee3\u66ff\u73af\u5883\u53d8\u91cf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: special-config\ndata:\n  special.how: very\n  special.type: charm\n---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: special-pod\nspec:\n  containers:\n    - name: special-container\n      image: my-app:0.0.1\n      command: ['/bin/bash', '-c', 'env']\n      env:\n        - name: SPECIAL_CONFIG_HOW\n          valueFrom:\n            configMapKeyRef:\n              name: special-config\n              key: special.how\n")),(0,l.kt)("h4",{id:"32-\u901a\u8fc7\u6570\u636e\u5377\u63d2\u4ef6\u4f7f\u7528-configmap"},"3.2 \u901a\u8fc7\u6570\u636e\u5377\u63d2\u4ef6\u4f7f\u7528 ConfigMap"),(0,l.kt)("p",null,"\u5728\u6570\u636e\u5377\u91cc\u9762\u4f7f\u7528\u8fd9\u4e2a ConfigMap\uff0c\u6709\u4e0d\u540c\u7684\u9009\u9879\u3002\u6700\u57fa\u672c\u7684\u5c31\u662f\u5c06\u6587\u4ef6\u586b\u5165\u6570\u636e\u5377\uff0c\u5728\u8fd9\u4e2a\u6587\u4ef6\u4e2d\uff0c\u952e\u5c31\u662f\u6587\u4ef6\u540d\uff0c\u503c\u5c31\u662f\u6587\u4ef6\u5185\u5bb9\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: special-config\ndata:\n  special.how: very\n  special.type: charm\n---\napiVersion: v1\nkind: Pod\nmetadata:\n  name: special-pod\nspec:\n  containers:\n    - name: special-container\n      image: my-app:0.0.1\n      command: ['/bin/bash', '-c', 'cat /etc/config/special.how']\n      volumeMounts:\n        - mountPath: /etc/config\n          name: config-volume\n  volumes:\n    - name: config-volume\n      configMap:\n        name: special-config\n")),(0,l.kt)("h2",{id:"\u516bnamespace"},"\u516b\u3001Namespace"),(0,l.kt)("h3",{id:"1-namespace-\u6982\u8ff0"},"1 Namespace \u6982\u8ff0"),(0,l.kt)("p",null,"Namespace \u5728\u5f88\u591a\u60c5\u51b5\u4e0b\u7528\u4e8e\u5b9e\u73b0\u591a\u7528\u6237\u7684\u8d44\u6e90\u9694\u79bb\uff0c\u901a\u8fc7\u5c06\u96c6\u7fa4\u5185\u90e8\u7684\u8d44\u6e90\u5bf9\u8c61\u5206\u914d\u5230\u4e0d\u540c\u7684 Namespace \u4e2d\uff0c\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u5206\u7ec4\uff0c\u4fbf\u4e8e\u4e0d\u540c\u7684\u5206\u7ec4\u5728\u5171\u4eab\u4f7f\u7528\u6574\u4e2a\u96c6\u7fa4\u7684\u8d44\u6e90\u540c\u65f6\u8fd8\u80fd\u88ab\u5206\u522b\u7ba1\u7406\u3002Kubernetes \u96c6\u7fa4\u5728\u542f\u52a8\u540e\uff0c\u4f1a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a default \u7684 Namespace\uff0c\u5982\u679c\u4e0d\u7279\u522b\u6307\u660e Namespace\uff0c\u5219\u7528\u6237\u521b\u5efa\u7684 Pod\u3001RC\u3001Service \u90fd\u5c06\u88ab\u7cfb\u7edf\u521b\u5efa\u5230\u8fd9\u4e2a\u9ed8\u8ba4\u7684\u540d\u4e3a default \u7684 Namespace \u4e2d\u3002"),(0,l.kt)("h2",{id:"\u4e5dservice"},"\u4e5d\u3001Service"),(0,l.kt)("h3",{id:"1-service-\u6982\u8ff0"},"1 Service \u6982\u8ff0"),(0,l.kt)("p",null,"Service \u662f Kubernetes \u6700\u6838\u5fc3\u7684\u6982\u5ff5\u4e4b\u4e00\uff0c\u901a\u8fc7\u521b\u5efa Service\uff0c\u53ef\u4ee5\u4e3a\u4e00\u7ec4\u5177\u6709\u76f8\u540c\u529f\u80fd\u7684\u5bb9\u5668\u5e94\u7528\u63d0\u4f9b\u4e00\u4e2a\u7edf\u4e00\u7684\u5165\u53e3\u5730\u5740\uff0c\u5e76\u4e14\u5c06\u8bf7\u6c42\u8d1f\u8f7d\u5206\u53d1\u5230\u540e\u7aef\u7684\u5404\u4e2a\u5bb9\u5668\u5e94\u7528\u4e0a\u3002"),(0,l.kt)("h3",{id:"2-\u5916\u90e8\u670d\u52a1-service"},"2 \u5916\u90e8\u670d\u52a1 Service"),(0,l.kt)("p",null,"\u5728\u67d0\u4e9b\u7279\u6b8a\u73af\u5883\u4e2d\uff0c\u5e94\u7528\u7cfb\u7edf\u9700\u8981\u5c06\u4e00\u4e2a\u5916\u90e8\u6570\u636e\u5e93\u4f5c\u4e3a\u540e\u7aef\u670d\u52a1\u8fdb\u884c\u8fde\u63a5\uff0c\u6216\u5c06\u53e6\u4e00\u4e2a\u96c6\u7fa4\u6216 Namespace \u4e2d\u7684\u670d\u52a1\u4f5c\u4e3a\u670d\u52a1\u7684\u540e\u7aef\uff0c\u8fd9\u65f6\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa\u4e00\u4e2a\u65e0 Label Selector \u7684 Service \u6765\u5b9e\u73b0\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: Service\nmetadata:\n  name: my-service\nspec:\n  ports:\n    - port: 3306\n      protocol: TCP\n      targetPort: 3306\n---\napiVersion: v1\nkind: Endpoints\nsubsets:\n  - addresses:\n      - ip: 192.192.192.6\n    ports:\n      - port: 3306\n")),(0,l.kt)("h2",{id:"\u5341\u63a2\u9488"},"\u5341\u3001\u63a2\u9488"),(0,l.kt)("h3",{id:"1-livenessprobe\u5b58\u6d3b\u63a2\u9488"},"1 livenessProbe\uff08\u5b58\u6d3b\u63a2\u9488\uff09"),(0,l.kt)("p",null,"\u7528\u4e8e\u5224\u65ad\u5bb9\u5668\u662f\u5426\u5b58\u6d3b\uff0c\u5373 Pod \u662f\u5426\u4e3a Running \u72b6\u6001\uff0c\u5982\u679c livenessProbe \u63a2\u9488\u63a2\u6d4b\u5230\u5bb9\u5668\u4e0d\u5065\u5eb7\uff0c\u5219 kubectl \u5c06 kill \u6389\u5bb9\u5668\uff0c\u5e76\u6839\u636e\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565\u51b3\u5b9a\u662f\u5426\u91cd\u542f\u3002\u5982\u679c\u4e00\u4e2a\u5bb9\u5668\u4e0d\u5305\u542b livenessProbe \u63a2\u9488\uff0c\u5219 kubelet \u8ba4\u4e3a\u5bb9\u5668\u7684 livenessProbe \u63a2\u9488\u7684\u8fd4\u56de\u503c\u6c38\u8fdc\u6210\u529f\u3002"),(0,l.kt)("p",null,"\u6709\u65f6\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u56e0\u4e3a\u67d0\u4e9b\u539f\u56e0\uff08\u540e\u7aef\u670d\u52a1\u6545\u969c\u7b49\uff09\u5bfc\u81f4\u6682\u65f6\u65e0\u6cd5\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u4f46\u5e94\u7528\u8f6f\u4ef6\u6ca1\u6709\u7ec8\u6b62\uff0c\u5bfc\u81f4 K8S \u65e0\u6cd5\u9694\u79bb\u6709\u6545\u969c\u7684 Pod\uff0c\u8c03\u7528\u8005\u53ef\u80fd\u4f1a\u8bbf\u95ee\u5230\u6709\u6545\u969c\u7684 Pod\uff0c\u5bfc\u81f4\u4e1a\u52a1\u4e0d\u7a33\u5b9a\u3002K8S \u63d0\u4f9b livenessProbe \u6765\u68c0\u6d4b\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u6b63\u5e38\u8fd0\u884c\uff0c\u5e76\u4e14\u5bf9\u76f8\u5e94\u72b6\u51b5\u8fdb\u884c\u76f8\u5e94\u7684\u8865\u6551\u63aa\u65bd\u3002"),(0,l.kt)("h3",{id:"2-readinessprobe\u5c31\u7eea\u63a2\u9488"},"2 readinessProbe\uff08\u5c31\u7eea\u63a2\u9488\uff09"),(0,l.kt)("p",null,"\u7528\u4e8e\u5224\u65ad\u5bb9\u5668\u662f\u5426\u542f\u52a8\u5b8c\u6210\uff0c\u5373\u5bb9\u5668\u7684 Ready \u662f\u5426\u4e3a True\uff0c\u53ef\u4ee5\u63a5\u6536\u8bf7\u6c42\uff0c\u5982\u679c readinessProbe \u63a2\u6d4b\u5931\u8d25\uff0c\u5219\u5bb9\u5668\u7684 Ready \u5c06\u4e3a False\uff0c\u63a7\u5236\u5668\u5c06\u6b64 Pod \u7684 Endpoint \u4ece\u5bf9\u5e94\u7684 Service \u7684 Endpoint \u5217\u8868\u4e2d\u79fb\u9664\uff0c\u4ece\u6b64\u4e0d\u518d\u5c06\u4efb\u4f55\u8bf7\u6c42\u8c03\u5ea6\u5230\u6b64 Pod \u4e0a\uff0c\u76f4\u5230\u4e0b\u6b21\u63a2\u6d4b\u6210\u529f\u3002\u901a\u8fc7\u4f7f\u7528 readinessProbe \u63a2\u9488\uff0cKubernetes \u80fd\u591f\u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u5b8c\u5168\u542f\u52a8\uff0c\u7136\u540e\u624d\u5141\u8bb8\u670d\u52a1\u5c06\u6d41\u91cf\u53d1\u9001\u5230\u65b0\u526f\u672c\u3002"),(0,l.kt)("p",null,"\u6bd4\u5982\u4f7f\u7528 Tomcat \u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\uff0c\u5e76\u4e0d\u662f\u7b80\u5355\u5730\u8bf4 Tomcat \u542f\u52a8\u6210\u529f\u5c31\u53ef\u4ee5\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u7684\uff0c\u8fd8\u9700\u8981\u7b49\u5f85 Spring \u5bb9\u5668\u521d\u59cb\u5316\uff0c\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u8fde\u63a5\u7b49\u7b49\u3002\u5bf9\u4e8e Spring Boot \u5e94\u7528\uff0c\u9ed8\u8ba4\u7684 Actuator \u5e26\u6709 ",(0,l.kt)("inlineCode",{parentName:"p"},"/health")," \u63a5\u53e3\uff0c\u53ef\u4ee5\u7528\u6765\u8fdb\u884c\u542f\u52a8\u6210\u529f\u7684\u5224\u65ad\u3002"),(0,l.kt)("h3",{id:"3-\u63a2\u6d4b\u65b9\u6cd5"},"3 \u63a2\u6d4b\u65b9\u6cd5"),(0,l.kt)("p",null,"\u6bcf\u7c7b\u63a2\u9488\u90fd\u652f\u6301\u4e09\u79cd\u63a2\u6d4b\u65b9\u6cd5\u3002"),(0,l.kt)("h4",{id:"31-exec"},"3.1 exec"),(0,l.kt)("p",null,"\u901a\u8fc7\u6267\u884c\u547d\u4ee4\u6765\u68c0\u67e5\u670d\u52a1\u662f\u5426\u6b63\u5e38\uff0c\u9488\u5bf9\u590d\u6742\u68c0\u6d4b\u68c0\u6d4b\u6216\u65e0 HTTP \u63a5\u53e3\u7684\u670d\u52a1\uff0c\u547d\u4ee4\u8fd4\u56de\u503c\u4e3a 0 \u5219\u8868\u793a\u5bb9\u5668\u5065\u5eb7\u3002"),(0,l.kt)("h4",{id:"32-httpget"},"3.2 httpGet"),(0,l.kt)("p",null,"\u901a\u8fc7\u53d1\u9001 HTTP \u8bf7\u6c42\u68c0\u6d4b\u670d\u52a1\u662f\u5426\u6b63\u5e38\uff0c\u8fd4\u56de 200-399 \u72b6\u6001\u7801\u5219\u8868\u793a\u5bb9\u5668\u5065\u5eb7\u3002"),(0,l.kt)("h4",{id:"33-tcpsocket"},"3.3 tcpSocket"),(0,l.kt)("p",null,"\u901a\u8fc7\u5bb9\u5668\u7684 IP \u548c Port \u6267\u884c TCP \u68c0\u6d4b\uff0c\u5982\u679c\u80fd\u591f\u5efa\u7acb TCP \u8fde\u63a5\uff0c\u5219\u8868\u660e\u5bb9\u5668\u5065\u5eb7\u3002"),(0,l.kt)("h3",{id:"4-\u793a\u4f8b"},"4 \u793a\u4f8b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: Pod\nmetadata:\n  name: goproxy\n  labels:\n    app: goproxy\nspec:\n  containers:\n    - name: goproxy\n      image: k8s.gcr.io/goproxy:0.1\n      ports:\n        - containerPort: 8080\n      readinessProbe:\n        tcpSocket:\n          port: 8080\n        initialDelaySeconds: 5\n        periodSeconds: 10\n      livenessProbe:\n        tcpSocket:\n          port: 8080\n        initialDelaySeconds: 15\n        periodSeconds: 20\n")),(0,l.kt)("p",null,"\u63a2\u9488\u6709\u8bb8\u591a\u53ef\u9009\u5b57\u6bb5\uff0c\u53ef\u4ee5\u7528\u6765\u66f4\u52a0\u7cbe\u786e\u7684\u63a7\u5236 livenessProbe \u548c readinessPorbe \u4e24\u79cd\u63a2\u9488\u7684\u884c\u4e3a\u3002\u8fd9\u4e9b\u53c2\u6570\u5305\u62ec\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"initialDelaySeconds")),(0,l.kt)("td",{parentName:"tr",align:null},"\u5bb9\u5668\u542f\u52a8\u540e\u7b2c\u4e00\u6b21\u6267\u884c\u63a2\u6d4b\u65f6\u9700\u8981\u7b49\u5f85\u591a\u5c11\u79d2\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"periodSeconds")),(0,l.kt)("td",{parentName:"tr",align:null},"\u6267\u884c\u63a2\u6d4b\u7684\u9891\u7387\u3002\u9ed8\u8ba4 10 \u79d2\uff0c\u6700\u5c0f 1 \u79d2\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"timeoutSeconds")),(0,l.kt)("td",{parentName:"tr",align:null},"\u63a2\u6d4b\u8d85\u65f6\u65f6\u95f4\u3002\u9ed8\u8ba4 1 \u79d2\uff0c\u6700\u5c0f 1 \u79d2\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"successThreshold")),(0,l.kt)("td",{parentName:"tr",align:null},"\u63a2\u6d4b\u5931\u8d25\u540e\uff0c\u6700\u5c11\u8fde\u7eed\u63a2\u6d4b\u6210\u529f\u591a\u5c11\u6b21\u624d\u88ab\u8ba4\u5b9a\u4e3a\u6210\u529f\u3002\u9ed8\u8ba4 1\uff0c\u6700\u5c0f\u503c 1\u3002\u5bf9\u4e8e livenessProbe \u5fc5\u987b\u662f 1\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"failureThreshold")),(0,l.kt)("td",{parentName:"tr",align:null},"\u63a2\u6d4b\u6210\u529f\u540e\uff0c\u6700\u5c11\u8fde\u7eed\u63a2\u6d4b\u5931\u8d25\u591a\u5c11\u6b21\u624d\u88ab\u8ba4\u5b9a\u4e3a\u5931\u8d25\u3002\u9ed8\u8ba4 3\uff0c\u6700\u5c0f\u503c 1\u3002")))),(0,l.kt)("h2",{id:"\u5341\u4e00\u8c03\u5ea6\u5668"},"\u5341\u4e00\u3001\u8c03\u5ea6\u5668"),(0,l.kt)("h3",{id:"1-\u6982\u8ff0"},"1 \u6982\u8ff0"),(0,l.kt)("p",null,"\u4e00\u4e2a\u5bb9\u5668\u5e73\u53f0\u7684\u4e3b\u8981\u529f\u80fd\u5c31\u662f\u4e3a\u5bb9\u5668\u5206\u914d\u8fd0\u884c\u65f6\u6240\u9700\u8981\u7684\u8ba1\u7b97\u3001\u5b58\u50a8\u548c\u7f51\u7edc\u8d44\u6e90\u3002\u5bb9\u5668\u8c03\u5ea6\u7cfb\u7edf\u8d1f\u8d23\u9009\u62e9\u5728\u6700\u5408\u9002\u7684\u4e3b\u673a\u4e0a\u542f\u52a8\u5bb9\u5668\uff0c\u5e76\u4e14\u5c06\u5b83\u4eec\u5173\u8054\u8d77\u6765\u3002\u5b83\u5fc5\u987b\u80fd\u591f\u81ea\u52a8\u7684\u5904\u7406\u5bb9\u5668\u6545\u969c\u5e76\u4e14\u80fd\u591f\u5728\u66f4\u591a\u7684\u4e3b\u673a\u4e0a\u81ea\u52a8\u542f\u52a8\u66f4\u591a\u7684\u5bb9\u5668\u6765\u5e94\u5bf9\u66f4\u591a\u7684\u5e94\u7528\u8bbf\u95ee\u3002"),(0,l.kt)("p",null,"\u76ee\u524d\u4e09\u5927\u4e3b\u6d41\u7684\u5bb9\u5668\u5e73\u53f0 Swarm\u3001Mesos \u548c Kubernetes \u5177\u6709\u4e0d\u540c\u7684\u5bb9\u5668\u8c03\u5ea6\u7cfb\u7edf\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Swarm \u7684\u7279\u70b9\u662f\u76f4\u63a5\u8c03\u5ea6 Docker \u5bb9\u5668\uff0c\u5e76\u4e14\u63d0\u4f9b\u548c\u6807\u51c6 Docker API \u4e00\u81f4\u7684 API\u3002"),(0,l.kt)("li",{parentName:"ul"},"Mesos \u9488\u5bf9\u4e0d\u540c\u7684\u8fd0\u884c\u6846\u67b6\u91c7\u7528\u76f8\u5bf9\u72ec\u7acb\u7684\u8c03\u5ea6\u7cfb\u7edf\uff0c\u5176\u4e2d Marathon \u6846\u67b6\u63d0\u4f9b\u4e86 Docker \u5bb9\u5668\u7684\u539f\u751f\u652f\u6301\u3002"),(0,l.kt)("li",{parentName:"ul"},"Kubernetes \u91c7\u7528\u4e86 Pod \u548c Label \u8fd9\u6837\u7684\u6982\u5ff5\u628a\u5bb9\u5668\u7ec4\u5408\u6210\u4e00\u4e2a\u4e2a\u7684\u4e92\u76f8\u5b58\u5728\u4f9d\u8d56\u5173\u7cfb\u7684\u903b\u8f91\u5355\u5143\u3002\u76f8\u5173\u5bb9\u5668\u88ab\u7ec4\u5408\u6210 Pod \u540e\u88ab\u5171\u540c\u90e8\u7f72\u548c\u8c03\u5ea6\u3002\u5f62\u6210\u670d\u52a1\u3002")),(0,l.kt)("p",null,"\u76f8\u5bf9\u6765\u8bf4\uff0cKubernetes \u91c7\u7528\u8fd9\u6837\u7684\u65b9\u5f0f\u7b80\u5316\u4e86\u96c6\u7fa4\u8303\u56f4\u5185\u76f8\u5173\u5bb9\u5668\u88ab\u5171\u540c\u8c03\u5ea6\u7684\u590d\u6742\u6027\u3002\u6362\u4e00\u79cd\u89d2\u5ea6\u6765\u770b\uff0cKubernetes \u91c7\u7528\u8fd9\u79cd\u65b9\u5f0f\u80fd\u591f\u76f8\u5bf9\u5bb9\u6613\u7684\u652f\u6301\u66f4\u5f3a\u5927\u3001\u66f4\u590d\u6742\u7684\u5bb9\u5668\u8c03\u5ea6\u7b97\u6cd5\u3002"),(0,l.kt)("h3",{id:"2-k8s-\u8c03\u5ea6\u5de5\u4f5c\u65b9\u5f0f"},"2 K8S \u8c03\u5ea6\u5de5\u4f5c\u65b9\u5f0f"),(0,l.kt)("p",null,"Kubernetes \u8c03\u5ea6\u5668\u4f5c\u4e3a\u96c6\u7fa4\u7684\u5927\u8111\uff0c\u5728\u5982\u4f55\u63d0\u9ad8\u96c6\u7fa4\u7684\u8d44\u6e90\u5229\u7528\u7387\u3001\u4fdd\u8bc1\u96c6\u7fa4\u4e2d\u670d\u52a1\u7684\u7a33\u5b9a\u8fd0\u884c\u4e2d\u4e5f\u4f1a\u53d8\u5f97\u8d8a\u6765\u8d8a\u91cd\u8981\u3002Kubernetes \u7684\u8d44\u6e90\u5206\u4e3a\u4e24\u79cd\u5c5e\u6027\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53ef\u538b\u7f29\u8d44\u6e90\uff08\u4f8b\u5982 CPU \u5faa\u73af\u3001Disk I/O \u5bbd\u5e26\uff09\u90fd\u662f\u53ef\u4ee5\u88ab\u9650\u5236\u548c\u88ab\u56de\u6536\u7684\uff0c\u5bf9\u4e8e\u4e00\u4e2a Pod \u6765\u8bf4\u53ef\u4ee5\u964d\u4f4e\u8fd9\u4e9b\u8d44\u6e90\u7684\u4f7f\u7528\u91cf\u800c\u4e0d\u53bb\u6740\u6389 Pod\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u53ef\u538b\u7f29\u8d44\u6e90\uff08\u4f8b\u5982\u5185\u5b58\u3001\u786c\u76d8\u7a7a\u95f4\uff09\u4e00\u822c\u6765\u8bf4\u4e0d\u6740\u6389 Pod \u5c31\u6ca1\u6cd5\u56de\u6536\u3002\u672a\u6765 Kubernetes \u4f1a\u52a0\u5165\u66f4\u591a\u8d44\u6e90\uff0c\u4f8b\u5982\u7f51\u7edc\u5e26\u5bbd\u3001\u5b58\u50a8 IOPS \u7684\u652f\u6301\u3002")),(0,l.kt)("h3",{id:"3-k8s-\u8c03\u5ea6\u5668"},"3 K8S \u8c03\u5ea6\u5668"),(0,l.kt)("h4",{id:"31-\u6982\u8ff0"},"3.1 \u6982\u8ff0"),(0,l.kt)("p",null,"kube-scheduler \u662f Kubernetes \u7cfb\u7edf\u7684\u6838\u5fc3\u7ec4\u4ef6\u4e4b\u4e00\uff0c\u4e3b\u8981\u8d1f\u8d23\u6574\u4e2a\u96c6\u7fa4\u8d44\u6e90\u7684\u8c03\u5ea6\u529f\u80fd\uff0c\u6839\u636e\u7279\u5b9a\u7684\u8c03\u5ea6\u7b97\u6cd5\u548c\u7b56\u7565\uff0c\u5c06 Pod \u8c03\u5ea6\u5230\u6700\u4f18\u7684\u5de5\u4f5c\u8282\u70b9\u4e0a\u9762\u53bb\uff0c\u4ece\u800c\u66f4\u52a0\u5408\u7406\u3001\u66f4\u52a0\u5145\u5206\u7684\u5229\u7528\u96c6\u7fa4\u7684\u8d44\u6e90\uff0c\u8fd9\u4e5f\u662f\u9009\u62e9\u4f7f\u7528 Kubernetes \u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u7406\u7531\u3002"),(0,l.kt)("h4",{id:"32-\u8c03\u5ea6\u6d41\u7a0b"},"3.2 \u8c03\u5ea6\u6d41\u7a0b"),(0,l.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ckube-scheduler \u63d0\u4f9b\u7684\u9ed8\u8ba4\u8c03\u5ea6\u5668\u80fd\u591f\u6ee1\u8db3\u6211\u4eec\u7edd\u5927\u591a\u6570\u7684\u8981\u6c42\uff0c\u4e4b\u524d\u63a5\u89e6\u7684\u793a\u4f8b\u4e5f\u57fa\u672c\u4e0a\u7528\u7684\u9ed8\u8ba4\u7684\u7b56\u7565\uff0c\u90fd\u53ef\u4ee5\u4fdd\u8bc1\u6211\u4eec\u7684 Pod \u53ef\u4ee5\u88ab\u5206\u914d\u5230\u8d44\u6e90\u5145\u8db3\u7684\u8282\u70b9\u4e0a\u8fd0\u884c\u3002\u4f46\u662f\u5728\u5b9e\u9645\u7684\u7ebf\u4e0a\u9879\u76ee\u4e2d\uff0c\u53ef\u80fd\u6211\u4eec\u81ea\u5df1\u4f1a\u6bd4 Kubernetes \u66f4\u52a0\u4e86\u89e3\u6211\u4eec\u81ea\u5df1\u7684\u5e94\u7528\uff0c\u6bd4\u5982\u6211\u4eec\u5e0c\u671b\u4e00\u4e2a Pod \u53ea\u80fd\u8fd0\u884c\u5728\u7279\u5b9a\u7684\u51e0\u4e2a\u8282\u70b9\u4e0a\uff0c\u6216\u8005\u8fd9\u51e0\u4e2a\u53ca\u8bf6\u70b9\u53ea\u80fd\u7528\u6765\u8fd0\u884c\u7279\u5b9a\u7c7b\u578b\u7684\u5e94\u7528\uff0c\u8fd9\u5c31\u9700\u8981\u6211\u4eec\u7684\u8c03\u5ea6\u5668\u80fd\u591f\u53ef\u63a7\u3002"),(0,l.kt)("p",null,"kube-scheduler \u662f Kubernetes \u7684\u8c03\u5ea6\u5668\uff0c\u5b83\u7684\u4e3b\u8981\u4f5c\u7528\u5c31\u662f\u6839\u636e\u7279\u5b9a\u7684\u8c03\u5ea6\u7b97\u6cd5\u548c\u8c03\u5ea6\u7b56\u7565\u5c06 Pod \u8c03\u5ea6\u5230\u5408\u9002\u7684 Node \u8282\u70b9\u4e0a\u53bb\uff0c\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u4e8c\u8fdb\u5236\u7a0b\u5e8f\uff0c\u542f\u52a8\u4e4b\u540e\u4f1a\u4e00\u76f4\u76d1\u542c API Server\uff0c\u83b7\u53d6\u5230 PodSpec.NodeName\uff0c\u5bf9\u6bcf\u4e2a Pod \u90fd\u4f1a\u548c\u85cf\u5bb6\u4e00\u4e2a Binding\u3002"),(0,l.kt)("p",null,"\u8c03\u5ea6\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u9996\u5148\u662f\u9884\u9009\u8fc7\u7a0b\uff0c\u8fc7\u6ee4\u6389\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u8282\u70b9\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a Predicates\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u7136\u540e\u662f\u4f18\u9009\u8fc7\u7a0b\uff0c\u5bf9\u901a\u8fc7\u7684\u8282\u70b9\u6309\u7167\u4f18\u5148\u7ea7\u6392\u5e8f\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u79f0\u4e3a Priorities\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6700\u540e\u4ece\u4e2d\u9009\u62e9\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u8282\u70b9\uff0c\u5982\u679c\u4e2d\u95f4\u4efb\u4f55\u4e00\u6b65\u6709\u9519\u8bef\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\u9519\u8bef\u3002"))),(0,l.kt)("p",null,"Predicates \u9636\u6bb5\u9996\u5148\u904d\u5386\u5168\u90e8\u8282\u70b9\uff0c\u8fc7\u6ee4\u6389\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u8282\u70b9\uff0c\u5c5e\u4e8e\u5f3a\u5236\u6027\u89c4\u5219\uff0c\u8fd9\u4e00\u9636\u6bb5\u8f93\u51fa\u7684\u6240\u6709\u6ee1\u8db3\u8981\u6c42\u7684 Node \u5c06\u88ab\u8bb0\u5f55\u5e76\u4f5c\u4e3a\u7b2c\u4e8c\u9636\u6bb5\u7684\u8f93\u5165\uff0c\u5982\u679c\u6240\u6709\u7684\u8282\u70b9\u90fd\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u90a3\u4e48 Pod \u5c06\u4f1a\u4e00\u76f4\u5904\u4e8e Pending \u72b6\u6001\uff0c\u76f4\u5230\u8282\u70b9\u6ee1\u8db3\u6761\u4ef6\uff0c\u5728\u8fd9\u671f\u95f4\u8c03\u5ea6\u5668\u4f1a\u4e0d\u65ad\u7684\u91cd\u8bd5\u3002"),(0,l.kt)("p",null,"\u6240\u4ee5\u6211\u4eec\u5728\u90e8\u7f72\u5e94\u7528\u7684\u65f6\u5019\uff0c\u5982\u679c\u53d1\u73b0\u6709 Pod \u4e00\u76f4\u5904\u4e8e Pending \u72b6\u6001\uff0c\u90a3\u4e48\u5c31\u662f\u6ca1\u6709\u6ee1\u8db3\u8c03\u5ea6\u6761\u4ef6\u7684\u8282\u70b9\uff0c\u8fd9\u4e2a\u65f6\u5019\u53ef\u4ee5\u53bb\u68c0\u67e5\u4e0b\u8282\u70b9\u8d44\u6e90\u662f\u5426\u53ef\u7528\u3002"),(0,l.kt)("p",null,"Priorities \u9636\u6bb5\u5373\u518d\u6b21\u5bf9\u8282\u70b9\u8fdb\u884c\u7b5b\u9009\uff0c\u5982\u679c\u6709\u591a\u4e2a\u8282\u70b9\u90fd\u6ee1\u8db3\u6761\u4ef6\u7684\u8bdd\uff0c\u90a3\u4e48\u7cfb\u7edf\u4f1a\u6309\u7167\u8282\u70b9\u7684\u4f18\u5148\u7ea7\u5927\u5c0f\u5bf9\u8282\u70b9\u8fdb\u884c\u6392\u5e8f\uff0c\u6700\u540e\u9009\u62e9\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u8282\u70b9\u6765\u90e8\u7f72 Pod \u5e94\u7528\u3002"),(0,l.kt)("p",null,"\u800c Priorities \u4f18\u5148\u7ea7\u662f\u7531\u4e00\u7cfb\u5217\u952e\u503c\u5bf9\u7ec4\u6210\u7684\uff0c\u952e\u662f\u8be5\u8be5\u4f18\u5148\u7ea7\u7684\u540d\u79f0\uff0c\u503c\u662f\u5b83\u7684\u6743\u91cd\u503c\uff0c\u540c\u6837\uff0c\u6211\u4eec\u8fd9\u91cc\u7ed9\u5927\u5bb6\u5217\u4e3e\u51e0\u4e2a\u5177\u6709\u4ee3\u8868\u6027\u7684\u9009\u578b\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u9009\u9879"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"LeastRequestedPriority"),(0,l.kt)("td",{parentName:"tr",align:null},"\u901a\u8fc7\u8ba1\u7b97 CPU \u548c\u5185\u5b58\u7684\u4f7f\u7528\u7387\u6765\u51b3\u5b9a\u6743\u91cd\uff0c\u4f7f\u7528\u7387\u8d8a\u4f4e\u6743\u91cd\u8d8a\u9ad8\u3002\u5f53\u7136\u6b63\u5e38\u4e5f\u662f\u8d44\u6e90\u4f7f\u7528\u7387\u8d8a\u4f4e\u6743\u91cd\u8d8a\u9ad8\uff0c\u80fd\u7ed9\u522b\u7684 Pod \u8fd0\u884c\u7684\u53ef\u80fd\u6027\u5c31\u8d8a\u5927\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SelectorSpreadPriority"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e3a\u4e86\u66f4\u597d\u7684\u9ad8\u53ef\u7528\uff0c\u5bf9\u540c\u5c5e\u4e00\u4e2a Deployment \u6216\u8005 RC \u4e0b\u9762\u7684\u7684\u591a\u4e2a Pod \u526f\u672c\uff0c\u5c3d\u91cf\u8c03\u5ea6\u5230\u591a\u4e2a\u4e0d\u540c\u7684\u8282\u70b9\u4e0a\uff0c\u5f53\u4e00\u4e2a Pod \u88ab\u8c03\u5ea6\u7684\u65f6\u5019\uff0c\u4f1a\u5148\u53bb\u67e5\u627e\u8be5 Pod \u5bf9\u5e94\u7684 Controller\uff0c\u7136\u540e\u67e5\u770b\u8be5 Controller \u4e0b\u9762\u7684\u5df2\u5b58\u5728\u7684 Pod\uff0c\u8fd0\u884c Pod \u8d8a\u5c11\u7684\u8282\u70b9\u6743\u91cd\u8d8a\u9ad8\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ImageLocalityPriority"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5c31\u662f\u5982\u679c\u67d0\u4e2a\u8282\u70b9\u4e0a\u5df2\u7ecf\u6709\u8981\u4f7f\u7528\u7684\u955c\u50cf\u4e86\uff0c\u955c\u50cf\u603b\u5927\u5c0f\u503c\u8d8a\u5927\uff0c\u6743\u91cd\u5c06\u5c31\u8d8a\u9ad8\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"NodeAffinityPriority"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u4e2a\u5c31\u662f\u6839\u636e\u8282\u70b9\u7684\u4eb2\u548c\u6027\u6765\u8ba1\u7b97\u4e00\u4e2a\u6743\u91cd\u503c\u3002")))),(0,l.kt)("h3",{id:"4-\u8282\u70b9\u8d44\u6e90\u8c03\u5ea6\u4eb2\u548c\u6027"},"4 \u8282\u70b9\u8d44\u6e90\u8c03\u5ea6\u4eb2\u548c\u6027"),(0,l.kt)("p",null,"\u8282\u70b9\u4eb2\u548c\u6027\u89c4\u5219\uff1a\u786c\u4eb2\u548c\u6027 required\u3001\u8f6f\u4eb2\u548c\u6027 preferred\u3002"),(0,l.kt)("p",null,"\u786c\u4eb2\u548c\u6027\u89c4\u5219\u4e0d\u6ee1\u8db3\u65f6\uff0cPod \u4f1a\u7f6e\u4e8e Pending \u72b6\u6001\uff0c\u8f6f\u4eb2\u548c\u6027\u89c4\u5219\u4e0d\u6ee1\u8db3\u65f6\uff0c\u4f1a\u9009\u62e9\u4e00\u4e2a\u4e0d\u5339\u914d\u7684\u8282\u70b9\u3002\u5f53\u8282\u70b9\u6807\u7b7e\u6539\u53d8\u800c\u4e0d\u518d\u7b26\u5408\u6b64\u8282\u70b9\u4eb2\u548c\u6027\u89c4\u5219\u65f6\uff0c\u4e0d\u4f1a\u5c06 Pod \u4ece\u8be5\u8282\u70b9\u79fb\u51fa\uff0c\u4ec5\u5bf9\u65b0\u5efa\u7684 Pod \u5bf9\u8c61\u751f\u6548\u3002"),(0,l.kt)("h4",{id:"41-\u8282\u70b9\u786c\u4eb2\u548c\u6027"},"4.1 \u8282\u70b9\u786c\u4eb2\u548c\u6027"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-app\nspec:\n  containers:\n    - { name: 'my-app', image: 'my-app:0.0.1' }\n  affinity:\n    nodeAffinity:\n      requiredDuringSchedulingIgnoredDuringExecution:\n        nodeSelectorTerms:\n          - matchExpressions:\n              - { key: 'zone', operator: 'In', values: ['foo'] }\n")),(0,l.kt)("h4",{id:"42-\u8282\u70b9\u8f6f\u4eb2\u548c\u6027"},"4.2 \u8282\u70b9\u8f6f\u4eb2\u548c\u6027"),(0,l.kt)("p",null,"\u67d4\u6027\u63a7\u5236\u903b\u8f91\uff0c\u5f53\u6761\u4ef6\u4e0d\u6ee1\u8db3\u65f6\uff0c\u80fd\u63a5\u53d7\u522b\u7f16\u6392\u4e0e\u5176\u5b83\u4e0d\u7b26\u5408\u6761\u4ef6\u7684\u8282\u70b9\u4e4b\u4e0a\uff0c\u6743\u91cd weight \u5b9a\u4e49\u4f18\u5148\u7ea7\uff0c1-100 \u503c\u8d8a\u5927\u4f18\u5148\u7ea7\u4f59\u8d8a\u9ad8\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-app\nspec:\n  selector:\n    matchLabels: { app: 'my-app' }\n  replicas: 2\n  template:\n    metadata:\n      name: my-app\n      labels: { app: 'my-app' }\n    spec:\n      containers:\n        - { name: 'my-app', image: 'my-app:0.0.1' }\n      affinity:\n        nodeAffinity:\n          preferredDuringSchedulingIgnoredDuringExecution:\n            - weight: 60\n              preference:\n                matchExpressions:\n                  - { key: 'zone', operator: 'In', values: ['foo'] }\n            - weight: 30\n              preference:\n                matchExpressions:\n                  - { key: 'ssd', operator: 'Exists', values: [] }\n")),(0,l.kt)("h3",{id:"5-pod-\u8d44\u6e90\u8c03\u5ea6\u8c03\u5ea6\u4eb2\u548c\u6027"},"5 Pod \u8d44\u6e90\u8c03\u5ea6\u8c03\u5ea6\u4eb2\u548c\u6027"),(0,l.kt)("h4",{id:"51-pod-\u786c\u4eb2\u548c\u8c03\u5ea6"},"5.1 Pod \u786c\u4eb2\u548c\u8c03\u5ea6"),(0,l.kt)("p",null,"Pod \u786c\u4eb2\u548c\u6027\u63cf\u8ff0\u4e00\u4e2a Pod \u4e0e\u5177\u6709\u67d0\u4e2a\u7279\u5f81\u7684\u73b0\u5b58 Pod \u8fd0\u884c\u4f4d\u7f6e\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5373\u9700\u554a\u54df\u4e8b\u5148\u5b58\u5728\u88ab\u4f9d\u8d56\u7684 Pod \u5bf9\u8c61\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'kubectl run tomcat --labels="app=tomcat" --image=tomcat:latest\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-app\nspec:\n  containers:\n    - name: my-app\n      image: my-app:0.0.1\n  affinity:\n    podAffinity:\n      requiredDuringSchedulingIgnoredDuringExecution:\n        - labelSelector:\n            matchExpressions:\n              - { key: 'app', operator: 'In', values: ['tomcat'] } # \u5f53\u524d Pod \u8981\u8ddf\u6807\u7b7e\u4e3a app \u503c\u4e3a tomcat \u7684 Pod \u5728\u4e00\u8d77\n          topologyKey: kubernetes.io/hostname # \u6839\u636e\u6311\u9009\u51fa\u6765\u7684 Pod \u6240\u6709\u8282\u70b9\u7684 hostname \u4f5c\u4e3a\u540c\u4e00\u4f4d\u7f6e\u7684\u5224\u5b9a\n")),(0,l.kt)("h4",{id:"52-pod-\u8f6f\u4eb2\u548c\u8c03\u5ea6"},"5.2 Pod \u8f6f\u4eb2\u548c\u8c03\u5ea6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-app\nspec:\n  selector:\n    matchLabels: { app: 'my-app' }\n  replicas: 3\n  template:\n    metadata:\n      name: my-app\n      labels: { app: 'my-app' }\n    spec:\n      containers:\n        - { name: 'my-app', image: 'my-app:0.0.1' }\n      affinity:\n        podAffinity:\n          preferredDuringSchedulingIgnoredDuringExecution:\n            - weight: 80\n              podAffinityTerm:\n                topologyKey: zone\n                labelSelector:\n                  matchExpressions:\n                    - { key: 'app', operator: 'In', values: ['cache'] }\n            - weight: 20\n              podAffinityTerm:\n                topologyKey: zone\n                labelSelector:\n                  matchExpressions:\n                    - { key: 'app', operator: 'In', values: ['db'] }\n")),(0,l.kt)("h4",{id:"53-pod-\u53cd\u4eb2\u548c\u7b56\u7565"},"5.3 Pod \u53cd\u4eb2\u548c\u7b56\u7565"),(0,l.kt)("p",null,"Pod \u53cd\u4eb2\u5408\u8c03\u5ea6\u7528\u4e8e\u5206\u6563\u540c\u4e00\u7c7b\u5e94\u7528\uff0c\u8c03\u5ea6\u81f3\u4e0d\u540c\u7684\u533a\u57df\u3001\u673a\u67b6\u6216\u8282\u70b9\u7b49\uff0c\u5c06 ",(0,l.kt)("inlineCode",{parentName:"p"},"spec.affinity.podAffinity")," \u66ff\u6362\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"sepc.affinity.podAntiAffinity"),"\u3002\u53cd\u4eb2\u548c\u7b56\u7565\u4e5f\u5206\u4e3a\u67d4\u6027\u7ea6\u675f\u548c\u5f3a\u5236\u7ea6\u675f\u3002"),(0,l.kt)("h3",{id:"6-\u6c61\u70b9\u548c\u5bb9\u5fcd\u5ea6"},"6 \u6c61\u70b9\u548c\u5bb9\u5fcd\u5ea6"),(0,l.kt)("p",null,"\u6c61\u70b9 taints \u662f\u5b9a\u4e49\u5728\u8282\u70b9\u4e0a\u7684\u952e\u503c\u578b\u6570\u636e\uff0c\u7528\u4e8e\u8ba9\u8282\u70b9\u62d2\u7edd\u5c06 Pod \u8c03\u5ea6\u8fd0\u884c\u4e0e\u5176\u4e0a\uff0c\u9664\u975e Pod \u6709\u63a5\u7eb3\u6c61\u70b9\u7684\u5bb9\u5fcd\u5ea6\u3002\u5bb9\u5fcd\u5ea6 tolerations \u662f\u5b9a\u4e49\u5728 Pod \u4e0a\u7684\u952e\u503c\u578b\u6570\u636e\uff0c\u7528\u4e8e\u914d\u7f6e\u53ef\u5bb9\u5fcd\u7684\u6c61\u70b9\uff0c\u4e14\u8c03\u5ea6\u5668\u5c06 Pod \u8c03\u5ea6\u81f3\u5176\u80fd\u5bb9\u5fcd\u8be5\u8282\u70b9\u6c61\u70b9\u7684\u8282\u70b9\u4e0a\u6216\u6ca1\u6709\u6c61\u70b9\u7684\u8282\u70b9\u4e0a\u3002"),(0,l.kt)("p",null,"Kubernetes \u4f7f\u7528\u9884\u9009\u7b56\u7565\u548c\u4f18\u9009\u51fd\u6570\u5b8c\u6210\u8be5\u673a\u5236\u3002"),(0,l.kt)("p",null,"\u8282\u70b9\u4eb2\u548c\u6027\u4f7f\u5f97 Pod \u5bf9\u8c61\u88ab\u5438\u5f15\u5230\u4e00\u7c7b\u7279\u5b9a\u7684\u8282\u70b9\uff08nodeSelector \u548c affinity\uff09\uff0c\u6c61\u70b9\u63d0\u4f9b\u8ba9\u8282\u70b9\u6392\u65a5\u7279\u5b9a Pod \u5bf9\u8c61\u7684\u80fd\u529b\u3002"),(0,l.kt)("h4",{id:"61-\u5b9a\u4e49\u6c61\u70b9\u548c\u5bb9\u5fcd\u5ea6"},"6.1 \u5b9a\u4e49\u6c61\u70b9\u548c\u5bb9\u5fcd\u5ea6"),(0,l.kt)("p",null,"\u6c61\u70b9\u5b9a\u4e49\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"nodes.spec.taints"),"\uff0c\u5bb9\u5fcd\u5ea6\u5b9a\u4e49\u4e8e ",(0,l.kt)("inlineCode",{parentName:"p"},"pods.spec.tolerations"),"\u3002"),(0,l.kt)("h4",{id:"62-\u5b9a\u4e49\u6392\u65a5\u7b49\u7ea7"},"6.2 \u5b9a\u4e49\u6392\u65a5\u7b49\u7ea7"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"NoSchedule\uff0c\u4e0d\u80fd\u5bb9\u5fcd\uff0c\u4f46\u4ec5\u5f71\u54cd\u8c03\u5ea6\u8fc7\u7a0b\uff0c\u5df2\u8c03\u5ea6\u4e0a\u53bb\u7684 Pod \u4e0d\u53d7\u5f71\u54cd\uff0c\u4ec5\u5bf9\u65b0\u589e\u52a0\u7684 Pod \u751f\u6548\u3002"),(0,l.kt)("li",{parentName:"ul"},"PreferNoSchedule\uff0c\u67d4\u6027\u7ea6\u675f\uff0c\u8282\u70b9\u73b0\u5b58 Pod \u4e0d\u53d7\u5f71\u54cd\uff0c\u5982\u679c\u5b9e\u5728\u662f\u6ca1\u6709\u7b26\u5408\u7684\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u8c03\u5ea6\u4e0a\u6765\u3002"),(0,l.kt)("li",{parentName:"ul"},"NoExecute\uff0c\u4e0d\u80fd\u5bb9\u5fcd\uff0c\u5f53\u6c61\u70b9\u53d8\u52a8\u65f6\uff0cPod \u5bf9\u8c61\u4f1a\u88ab\u9a71\u9010\u3002")),(0,l.kt)("h4",{id:"63-\u5728-pod-\u4e0a\u5b9a\u4e49\u5bb9\u5fcd\u5ea6"},"6.3 \u5728 Pod \u4e0a\u5b9a\u4e49\u5bb9\u5fcd\u5ea6"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7b49\u503c\u6bd4\u8f83\uff0c\u5bb9\u5fcd\u5ea6\u4e0e\u6c61\u70b9\u5728 key\u3001value\u3001effect\uff08\u6392\u65a5\u7b49\u7ea7\uff09 \u4e09\u8005\u5b8c\u5168\u5339\u914d\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5b58\u5728\u6027\u5224\u65ad\uff0ckey\u3001effect \u5b8c\u5168\u5339\u914d\uff0cvalue \u4f7f\u7528\u7a7a\u503c\u3002")),(0,l.kt)("h4",{id:"64-\u7ba1\u7406\u8282\u70b9\u4e0a\u7684\u6c61\u70b9"},"6.4 \u7ba1\u7406\u8282\u70b9\u4e0a\u7684\u6c61\u70b9"),(0,l.kt)("p",null,"\u540c\u4e00\u4e2a\u952e\u503c\u6570\u636e\uff0ceffect \u4e0d\u540c\uff0c\u4e5f\u5c5e\u4e8e\u4e0d\u540c\u7684\u6c61\u70b9\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u7ed9\u8282\u70b9\u6dfb\u52a0\u6c61\u70b9"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl taint node node2 node-type=production:NoSchedule\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u67e5\u770b\u8282\u70b9\u6c61\u70b9"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl get nodes <node-name> -o go-template={{.spec.taints}}\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5220\u9664\u8282\u70b9\u6c61\u70b9"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'kubectl taint node node1 node-type=production:NoSchedule\n\n# \u5220\u9664\u6240\u6709\u6c61\u70b9\nkubectl patch nodes node1 -p \'{"spec": {"taints": []}}\'\n')))),(0,l.kt)("h4",{id:"65-\u95ee\u9898\u8282\u70b9\u6807\u8bc6"},"6.5 \u95ee\u9898\u8282\u70b9\u6807\u8bc6"),(0,l.kt)("p",null,"K8S \u6838\u5fc3\u7ec4\u4ef6\u901a\u5e38\u90fd\u5bb9\u5fcd\u6b64\u7c7b\u6c61\u70b9\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u6c61\u70b9"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"node.kubernetes.io/not-ready")),(0,l.kt)("td",{parentName:"tr",align:null},"\u8282\u70b9\u8fdb\u5165 NotReady \u72b6\u6001\u65f6\u81ea\u52a8\u6dfb\u52a0\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"node.alpha.kubernetes.io/unreachable")),(0,l.kt)("td",{parentName:"tr",align:null},"\u8282\u70b9\u8fdb\u5165 NotReachable \u72b6\u6001\u65f6\u81ea\u52a8\u6dfb\u52a0\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"node.kubernetes.io/out-of-disk")),(0,l.kt)("td",{parentName:"tr",align:null},"\u8282\u70b9\u8fdb\u5165 OutOfDisk \u72b6\u6001\u65f6\u81ea\u52a8\u6dfb\u52a0\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"node.kubernetes.io/memory-pressure")),(0,l.kt)("td",{parentName:"tr",align:null},"\u8282\u70b9\u5185\u5b58\u8d44\u6e90\u9762\u4e34\u538b\u529b\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"node.kubernetes.io/disk-pressure")),(0,l.kt)("td",{parentName:"tr",align:null},"\u8282\u70b9\u78c1\u76d8\u9762\u4e34\u538b\u529b")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"node.kubernetes.io/network-unavailable")),(0,l.kt)("td",{parentName:"tr",align:null},"\u8282\u70b9\u7f51\u7edc\u4e0d\u53ef\u7528")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"node.cloudprovider.kubernetes.io/uninitialized")),(0,l.kt)("td",{parentName:"tr",align:null},"kubelet \u7531\u5916\u90e8\u4e91\u73af\u5883\u7a0b\u5e8f\u542f\u52a8\u65f6\u81ea\u52a8\u6dfb\u52a0\uff0c\u5f85\u5230\u63a7\u5236\u5668\u521d\u59cb\u5316\u6b64\u8282\u70b9\u65f6\u518d\u5c06\u5176\u5220\u9664\u3002")))),(0,l.kt)("h3",{id:"7-pod-\u4f18\u5148\u7ea7\u548c\u62a2\u5360\u5f0f\u8c03\u5ea6"},"7 Pod \u4f18\u5148\u7ea7\u548c\u62a2\u5360\u5f0f\u8c03\u5ea6"),(0,l.kt)("p",null,"\u4f18\u9009\u7ea7\u4f1a\u5f71\u54cd\u8282\u70b9\u4e0a Pod \u7684\u8c03\u5ea6\u987a\u5e8f\u548c\u9a71\u9010\u6b21\u5e8f\u3002\u4e00\u4e2a Pod \u5bf9\u8c61\u65e0\u6cd5\u88ab\u8c03\u5ea6\u65f6\uff0c\u8c03\u5ea6\u5668\u4f1a\u5c1d\u8bd5\u62a2\u5360\uff08\u9a71\u9010\uff09\u8f83\u4f4e\u4f18\u5148\u7ea7\u7684 Pod \u5bf9\u8c61\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u8c03\u5ea6\u5f53\u524d Pod\u3002"),(0,l.kt)("h3",{id:"8-pod-\u4f18\u5148\u7ea7\u548c\u62a2\u5360\u673a\u5236\u9ed8\u8ba4\u5904\u4e8e\u7981\u7528\u72b6\u6001"},"8 Pod \u4f18\u5148\u7ea7\u548c\u62a2\u5360\u673a\u5236\u9ed8\u8ba4\u5904\u4e8e\u7981\u7528\u72b6\u6001"),(0,l.kt)("p",null,"\u542f\u7528\uff1a\u540c\u65f6\u4e3a kube-apiserver\u3001kube-scheduler\u3001kubelet \u7a0b\u5e8f\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"--feature-gates")," \u6dfb\u52a0 ",(0,l.kt)("inlineCode",{parentName:"p"},"PodPriority=true"),"\u3002"),(0,l.kt)("p",null,"\u4f7f\u7528\uff1a\u4e8b\u5148\u521b\u5efa\u4f18\u5148\u7ea7\u7c7b\u522b\uff0c\u5e76\u5728\u521b\u5efa Pod \u8d44\u6e90\u65f6\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"priorityClassName")," \u5c5e\u6027\u6307\u5b9a\u6240\u5c5e\u4f18\u9009\u7ea7\u7c7b\u522b\u3002"),(0,l.kt)("h2",{id:"\u5341\u4e8c\u96c6\u7fa4\u5b89\u5168\u673a\u5236-rbac"},"\u5341\u4e8c\u3001\u96c6\u7fa4\u5b89\u5168\u673a\u5236 RBAC"),(0,l.kt)("h3",{id:"1-\u57fa\u672c\u6982\u5ff5-1"},"1 \u57fa\u672c\u6982\u5ff5"),(0,l.kt)("p",null,"RBAC \u5728 K8S v1.5 \u4e2d\u5f15\u5165\uff0c\u5728 v1.6 \u7248\u672c\u65f6\u5347\u7ea7\u4e3a Beta \u7248\u672c\uff0c\u5e76\u6210\u4e3a kubeadm \u5b89\u88c5\u65b9\u5f0f\u4e0b\u7684\u9ed8\u8ba4\u9009\u578b\uff0c\u76f8\u5bf9\u4e8e\u5176\u5b83\u8bbf\u95ee\u63a7\u5236\u65b9\u5f0f\uff0c\u65b0\u7684 RBAC \u5177\u6709\u5982\u4e0b\u4f18\u52bf\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u96c6\u7fa4\u4e2d\u7684\u8d44\u6e90\u548c\u975e\u8d44\u6e90\u6743\u9650\u5747\u6709\u5b8c\u6574\u7684\u8986\u76d6\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u6574\u4e2a RBAC \u5b8c\u5168\u7531\u51e0\u4e2a API \u5bf9\u8c61\u5b8c\u6210\uff0c\u540c\u5176\u5b83 API \u5bf9\u8c61\u4e00\u6837\uff0c\u53ef\u4ee5\u7528 kubectl \u6216 API \u8fdb\u884c\u64cd\u4f5c\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u8fdb\u884c\u8c03\u6574\uff0c\u65e0\u9700\u91cd\u542f API Server\u3002")),(0,l.kt)("p",null,"\u8981\u4f7f\u7528 RBAC \u6388\u6743\uff0c\u9700\u8981\u5728 API Server \u7684\u542f\u52a8\u53c2\u6570\u4e2d\u52a0\u4e0a ",(0,l.kt)("inlineCode",{parentName:"p"},"--authorization-mode=RBAC"),"\u3002"),(0,l.kt)("h3",{id:"2-rbac-\u7684-api-\u8d44\u6e90\u5bf9\u8c61\u8bf4\u660e"},"2 RBAC \u7684 API \u8d44\u6e90\u5bf9\u8c61\u8bf4\u660e"),(0,l.kt)("p",null,"RBAC \u5f15\u5165\u4e86 4 \u4e2a\u65b0\u7684\u9876\u7ea7\u8d44\u6e90\u5bf9\u8c61\uff1aRole\u3001ClusterRole\u3001RoleBinding\u3001ClusterRoleBinding\u3002\u540c\u5176\u5b83 API \u8d44\u6e90\u5bf9\u8c61\u4e00\u6837\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 kubectl \u6216\u8005 API \u8c03\u7528\u7b49\u65b9\u5f0f\u64cd\u4f5c\u8fd9\u4e9b\u8d44\u6e90\u5bf9\u8c61\u3002"),(0,l.kt)("h4",{id:"21-role\u89d2\u8272"},"2.1 Role\uff08\u89d2\u8272\uff09"),(0,l.kt)("p",null,"\u4e00\u4e2a\u89d2\u8272\u5c31\u662f\u4e00\u7ec4\u6743\u9650\u7684\u96c6\u5408\uff0c\u8fd9\u91cc\u7684\u6743\u9650\u90fd\u662f\u8bb8\u53ef\u5f62\u5f0f\uff0c\u4e0d\u5b58\u5728\u62d2\u7edd\u7684\u89c4\u5219\u3002\u5728\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\u4e2d\uff0c\u53ef\u4ee5\u7528 Role \u6765\u5b9a\u4e49\u4e00\u4e2a\u89d2\u8272\uff0c\u5982\u679c\u662f\u96c6\u7fa4\u7ea7\u522b\u7684\uff0c\u5c31\u9700\u8981\u4f7f\u7528 ClusterRole \u4e86\u3002\u89d2\u8272\u53ea\u80fd\u5bf9\u547d\u540d\u7a7a\u95f4\u5185\u7684\u8d44\u6e90\u8fdb\u884c\u6388\u6743\uff0c\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\u5b9a\u4e49\u7684\u89d2\u8272\u5177\u5907\u8bfb\u53d6 Pod \u7684\u6743\u9650\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  namespace: local\n  name: pod-reader\nrules:\n  - apiGroups: [''] # \u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u6838\u5fc3 API \u7fa4\n    resources: ['pods'] # \u652f\u6301\u7684\u8d44\u6e90\u5bf9\u8c61\u5217\u8868\uff0c\u4f8b\u5982\uff1apods\u3001deployments\u3001jobs \u7b49\n    verbs: ['get', 'watch', 'list'] # \u5bf9\u8d44\u6e90\u5bf9\u8c61\u7684\u64cd\u4f5c\u65b9\u6cd5\u5217\u8868\uff0c\u4f8b\u5982\uff1aget\u3001watch\u3001list\u3001delete\u3001replace \u7b49\n")),(0,l.kt)("h4",{id:"22-clusterrole\u96c6\u7fa4\u89d2\u8272"},"2.2 ClusterRole\uff08\u96c6\u7fa4\u89d2\u8272\uff09"),(0,l.kt)("p",null,"\u96c6\u7fa4\u89d2\u8272\u9664\u4e86\u5177\u6709\u548c\u89d2\u8272\u4e00\u81f4\u7684\u547d\u540d\u7a7a\u95f4\u5185\u8d44\u6e90\u7684\u7ba1\u7406\u80fd\u529b\uff0c\u56e0\u5176\u96c6\u7fa4\u7ea7\u522b\u7684\u8303\u56f4\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e8e\u4ee5\u4e0b\u7279\u6b8a\u5143\u7d20\u7684\u6388\u6743\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u96c6\u7fa4\u8303\u56f4\u5185\u7684\u8d44\u6e90\uff0c\u4f8b\u5982 Node\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u975e\u8d44\u6e90\u578b\u7684\u8def\u5f84\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5305\u542b\u5168\u90e8\u547d\u540d\u7a7a\u95f4\u7684\u8d44\u6e90\uff0c\u4f8b\u5982 Pods\u3002")),(0,l.kt)("p",null,"\u4e0b\u9762\u7684\u96c6\u7fa4\u89d2\u8272\u53ef\u4ee5\u8ba9\u7528\u6237\u6709\u6743\u8bbf\u95ee\u4efb\u610f\u4e00\u4e2a\u6216\u6240\u6709\u547d\u540d\u7a7a\u95f4\u7684 Secrets\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  # ClusterRole \u4e0d\u53d7\u9650\u4e8e\u547d\u540d\u7a7a\u95f4\n  name: secret-reader\nrules:\n  - apiGroups: ['']\n    resources: ['secrets']\n    verbs: ['get', 'watch', 'list']\n")),(0,l.kt)("h4",{id:"23-rolebinding\u89d2\u8272\u7ed1\u5b9a\u548c-clusterrolebinding\u96c6\u7fa4\u89d2\u8272\u7ed1\u5b9a"},"2.3 RoleBinding\uff08\u89d2\u8272\u7ed1\u5b9a\uff09\u548c ClusterRoleBinding\uff08\u96c6\u7fa4\u89d2\u8272\u7ed1\u5b9a\uff09"),(0,l.kt)("p",null,"\u89d2\u8272\u7ed1\u5b9a\u6216\u96c6\u7fa4\u89d2\u8272\u7ed1\u5b9a\u7528\u6765\u628a\u4e00\u4e2a\u89d2\u8272\u7ed1\u5b9a\u5230\u4e00\u4e2a\u76ee\u6807\u4e0a\uff0c\u7ed1\u5b9a\u76ee\u6807\u53ef\u4ee5\u662f User Group \u6216\u8005 Service Account\u3002\u4f7f\u7528 RoleBinding \u4e3a\u67d0\u4e2a\u547d\u540d\u7a7a\u95f4\u6388\u6743\uff0cClusterRoleBinding \u4e3a\u96c6\u7fa4\u8303\u56f4\u5185\u6388\u6743\u3002"),(0,l.kt)("p",null,"RoleBinding \u53ef\u4ee5\u5f15\u7528 Role \u8fdb\u884c\u6388\u6743\uff0c\u4e0b\u4f8b\u4e2d\u7684 RoleBinding \u5c06\u5728 default \u547d\u540d\u7a7a\u95f4\u628a pod-reader \u89d2\u8272\u6388\u4e88\u7528\u6237 jane\uff0c\u53ef\u4ee5\u8ba9 jane \u7528\u6237\u8bfb\u53d6 default \u547d\u540d\u7a7a\u95f4\u7684 Pod\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  namespace: default\n  name: read-pods\nsubjects:\n  - kind: User\n    name: jane\n    apiGroup: rbac.authorization.k8s.io\nroleRef:\n  apiGroup: Role\n  kind: pod-reader\n  name: rbac.authorization.k8s.io\n")),(0,l.kt)("p",null,"RoleBinding \u4e5f\u53ef\u4ee5\u5f15\u7528 ClusterRole\uff0c\u5bf9\u5c5e\u4e8e\u540c\u4e00\u547d\u540d\u7a7a\u95f4\u5185 ClusterRole \u5b9a\u4e49\u7684\u8d44\u6e90\u4e3b\u4f53\u8fdb\u884c\u6388\u6743\u3002\u4e00\u79cd\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u96c6\u7fa4\u7ba1\u7406\u5458\u4e3a\u96c6\u7fa4\u8303\u56f4\u9884\u5148\u5b9a\u4e49\u597d\u4e00\u7ec4\u89d2\uff08ClusterRole\uff09\uff0c\u7136\u540e\u518d\u5404\u4e2a\u547d\u540d\u7a7a\u95f4\u4e2d\u91cd\u590d\u4f7f\u7528\u8fd9\u4e9b ClusterRole\u3002"),(0,l.kt)("p",null,"\u4f7f\u7528 RoleBinding \u7ed1\u5b9a\u96c6\u7fa4\u89d2\u8272 secret-reader\uff0c\u4f7f dave \u53ea\u80fd\u8bfb\u53d6 development \u547d\u540d\u7a7a\u95f4\u4e2d\u7684 secret\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  namespace: development\n  name: read-pods\nsubjects:\n  - kind: User\n    name: dave\n    apiGroup: rbac.authorization.k8s.io\nroleRef:\n  apiGroup: ClusterRole\n  kind: secret-reader\n  name: rbac.authorization.k8s.io\n")),(0,l.kt)("p",null,"\u96c6\u7fa4\u89d2\u8272\u7ed1\u5b9a\u4e2d\u7684\u89d2\u8272\u53ea\u80fd\u662f\u96c6\u7fa4\u89d2\u8272\uff0c\u7528\u4e8e\u8fdb\u884c\u96c6\u7fa4\u7ea7\u522b\u6216\u8005\u5bf9\u6240\u6709\u547d\u540d\u7a7a\u95f4\u90fd\u751f\u6548\u6388\u6743\u3002\u5141\u8bb8 manager \u7ec4\u7684\u7528\u6237\u8bfb\u53d6\u4efb\u610f Namespace \u4e2d\u7684 secret\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: read-secrets-global\nsubjects:\n  - kind: Group\n    name: manager\n    apiGroup: rbac.authorization.k8s.io\nroleRef:\n  apiGroup: ClusterRole\n  kind: secret-reader\n  name: rbac.authorization.k8s.io\n")),(0,l.kt)("h3",{id:"3-\u5bf9\u8d44\u6e90\u7684\u5f15\u7528\u65b9\u5f0f"},"3 \u5bf9\u8d44\u6e90\u7684\u5f15\u7528\u65b9\u5f0f"),(0,l.kt)("p",null,"\u591a\u6570\u8d44\u6e90\u53ef\u4ee5\u7528\u5176\u540d\u79f0\u7684\u5b57\u7b26\u4e32\u6765\u8868\u8fbe\uff0c\u4e5f\u5c31\u662f Endpoint \u4e2d\u7684 URL \u76f8\u5bf9\u8def\u5f84\uff0c\u4f8b\u5982 Pods\uff0c\u7136\u540e\uff0c\u67d0\u4e9b kubernetes API \u5305\u542b\u4e0b\u7ea7\u8d44\u6e90\uff0c\u4f8b\u5982 Pod \u7684\u65e5\u5fd7\uff0cPod \u65e5\u5fd7\u7684 Endpoint \u662f",(0,l.kt)("inlineCode",{parentName:"p"},"GET /api/v1/namsepaces/{namespace}/pods/{name}/log"),"\u3002"),(0,l.kt)("p",null,"Pod \u662f\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\u5185\u7684\u8d44\u6e90\uff0clog \u5c31\u662f\u4e00\u4e2a\u4e0b\u7ea7\u8d44\u6e90\u3002\u8981\u5728\u4e00\u4e2a RBAC \u89d2\u8272\u4e2d\u4f53\u73b0\uff0c\u5219\u9700\u8981\u7528\u659c\u7ebf\u6765\u5206\u9694\u8d44\u6e90\u548c\u4e0b\u7ea7\u8d44\u6e90\u3002\u82e5\u60f3\u6388\u6743\u8ba9\u67d0\u4e2a\u4e3b\u4f53\u540c\u65f6\u80fd\u591f\u8bfb\u53d6 Pod \u548c Pod log\uff0c\u5219\u53ef\u4ee5\u914d\u7f6e resources \u4e3a\u4e00\u4e2a\u6570\u7ec4\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  namespace: default\n  name: pod-and-logs-reader\nrules:\n  - apiGroups: ['']\n    resources: ['pods', 'pods/log']\n    verbs: ['get', 'list']\n")),(0,l.kt)("p",null,"\u8d44\u6e90\u8fd8\u53ef\u4ee5\u901a\u8fc7\u540d\u5b57\u8fdb\u884c\u5f15\u7528\u3002\u5728\u6307\u5b9a ResourceName \u540e\uff0c\u4f7f\u7528 get\u3001delete\u3001update\u3001patch \u52a8\u8bcd\u7684\u8bf7\u6c42\uff0c\u5c31\u4f1a\u88ab\u9650\u5236\u5728\u8fd9\u4e2a\u8d44\u6e90\u5b9e\u4f8b\u8303\u56f4\u5185\u3002\u4f8b\u5982\u4e0b\u9762\u7684\u58f0\u660e\u8ba9\u4e00\u4e2a\u4e3b\u4f53\u53ea\u80fd\u5bf9\u4e00\u4e2a\u53eb my-configmap \u7684 ConfigMap \u8fdb\u884c get \u548c update \u64cd\u4f5c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  namespace: default\n  name: configmap-updater\nrules:\n  - apiGroups: ['']\n    resources: ['configmap']\n    resourceNames: ['my-configmap']\n    verbs: ['get', 'update']\n")),(0,l.kt)("h3",{id:"4-\u5e38\u89c1\u7684\u89d2\u8272\u793a\u4f8b"},"4 \u5e38\u89c1\u7684\u89d2\u8272\u793a\u4f8b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5141\u8bb8\u8bfb\u53d6\u6838\u5fc3 API \u7ec4\u4e2d Pod \u7684\u8d44\u6e90"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"rules:\n  - apiGroups: ['']\n    resources: ['pods']\n    verbs: ['get', 'list', 'watch']\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5141\u8bb8\u8bfb\u5199 extensions \u548c app \u4e24\u4e2a API \u7ec4\u4e2d\u7684 deployment \u8d44\u6e90"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"rules:\n  - apiGroups: ['extensions', 'app']\n    resources: ['deployments']\n    verbs: ['get', 'list', 'watch', 'create', 'update', 'patch', 'delete']\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5141\u8bb8\u8bfb\u5199 Pods \u548c Jobs"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"rules:\n  - apiGroups: ['']\n    resources: ['pods']\n    verbs: ['get', 'list', 'watch']\n  - apiGroups: ['batch', 'extensions']\n    resources: ['jobs']\n    verbs: ['get', 'list', 'watch', 'create', 'update', 'patch', 'delete']\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5141\u8bb8\u8bfb\u53d6\u4e00\u4e2a\u540d\u4e3a my-config \u7684 ConfigMap\uff08\u5fc5\u987b\u7ed1\u5b9a\u5230\u4e00\u4e2a RoleBinding \u6765\u9650\u5236\u5230\u4e00\u4e2a Namespace \u4e0b\u7684 ConfigMap\uff09"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"rules:\n  - apiGroups: ['']\n    resources: ['configmaps']\n    verbs: ['get']\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u8bfb\u53d6\u6838\u5fc3\u7ec4\u7684 Node \u8d44\u6e90\uff08Node \u5c5e\u4e8e\u96c6\u7fa4\u7ea7\u522b\u7684\u8d44\u6e90\uff0c\u5fc5\u987b\u653e\u5728 ClusterRole \u4e2d\uff0c\u5e76\u4f7f\u7528 ClusterRoleBinding \u8fdb\u884c\u7ed1\u5b9a\uff09"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"rules:\n  - apiGroups: [ '' ]\n    resources: [ 'nodes' 'list', 'watch' ]\n    verbs: [ 'get', ]\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5141\u8bb8\u5bf9\u975e\u8d44\u6e90\u7aef\u70b9 ",(0,l.kt)("inlineCode",{parentName:"p"},"/healthz")," \u53ca\u5176\u6240\u6709\u5b50\u8def\u5f84\u8fdb\u884c GET/POST \u64cd\u4f5c\uff08\u5fc5\u987b\u4f7f\u7528 ClusterRole \u548c ClusterRoleBinding\uff09"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"rules:\n  - nonResourceURLs: ['/healthz', '/healthz/*']\n    verbs: ['get', 'post']\n")))),(0,l.kt)("h3",{id:"5-\u5e38\u89c1\u7684\u89d2\u8272\u7ed1\u5b9a"},"5 \u5e38\u89c1\u7684\u89d2\u8272\u7ed1\u5b9a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u7528\u6237\u540d ",(0,l.kt)("inlineCode",{parentName:"p"},"Alice@example.com")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"subjects:\n  - kind: User\n    name: 'Alice@example.com'\n    apiGroup: rbac.authorization.k8s.io\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u7ec4\u540d ",(0,l.kt)("inlineCode",{parentName:"p"},"frontend-admins")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"subjects:\n  - kind: Group\n    name: 'frontend-admins'\n    apiGroup: rbac.authorization.k8s.io\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"kube-admin \u547d\u540d\u7a7a\u95f4\u4e0b\u7684\u9ed8\u8ba4 ServiceAccount"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"subjects:\n  - kind: ServiceAccount\n    namespace: kube-system\n    name: default\n    apiGroup: rbac.authorization.k8s.io\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"qa \u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u6240\u6709 ServiceAccount"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"subjects:\n  - kind: ServiceAccount\n    name: system:serviceaccounts:qa\n    apiGroup: rbac.authorization.k8s.io\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6240\u6709 ServiceAccount"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"subjects:\n  - kind: Group\n    name: system:serviceaccounts\n    apiGroup: rbac.authorization.k8s.io\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6240\u6709\u8ba4\u8bc1\u7528\u6237"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"subjects:\n  - kind: Group\n    name: system:authentication\n    apiGroup: rbac.authorization.k8s.io\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6240\u6709\u672a\u8ba4\u8bc1\u7528\u6237"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"subjects:\n  - kind: Group\n    name: system:unauthentication\n    apiGroup: rbac.authorization.k8s.io\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5168\u90e8\u7528\u6237"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"subjects:\n  - kind: Group\n    name: system:authentication\n    apiGroup: rbac.authorization.k8s.io\n  - kind: Group\n    name: system:unauthentication\n    apiGroup: rbac.authorization.k8s.io\n")))),(0,l.kt)("h3",{id:"6-\u9ed8\u8ba4\u7684\u89d2\u8272\u548c\u89d2\u8272\u7ed1\u5b9a"},"6 \u9ed8\u8ba4\u7684\u89d2\u8272\u548c\u89d2\u8272\u7ed1\u5b9a"),(0,l.kt)("p",null,"API Server \u4f1a\u521b\u5efa\u4e00\u5957\u9ed8\u8ba4\u7684 ClusterRole \u548c ClusterRoleBinding \u5bf9\u8c61\uff0c\u5176\u4e2d\u5f88\u591a\u662f\u4ee5 ",(0,l.kt)("inlineCode",{parentName:"p"},"system:")," \u4e3a\u524d\u7f00\u7684\uff0c\u4ee5\u8868\u660e\u8fd9\u4e9b\u8d44\u6e90\u5c5e\u4e8e\u57fa\u7840\u67b6\u6784\uff0c\u5bf9\u8fd9\u4e9b\u5bf9\u8c61\u7684\u6539\u52a8\u53ef\u80fd\u9020\u6210\u96c6\u7fa4\u6545\u969c\u3002"),(0,l.kt)("p",null,"\u6240\u6709\u9ed8\u8ba4\u7684 ClusterRole \u548c RoleBinding \u90fd\u4f1a\u7528\u6807\u7b7e ",(0,l.kt)("inlineCode",{parentName:"p"},"kubernetes.io/bootstrapping=rbac-defaults")," \u8fdb\u884c\u6807\u8bb0\u3002"),(0,l.kt)("h3",{id:"7-\u6388\u6743\u6ce8\u610f\u4e8b\u9879"},"7 \u6388\u6743\u6ce8\u610f\u4e8b\u9879"),(0,l.kt)("h4",{id:"\u9884\u9632\u63d0\u6743\u548c\u6388\u6743\u521d\u59cb\u5316"},"\u9884\u9632\u63d0\u6743\u548c\u6388\u6743\u521d\u59cb\u5316"),(0,l.kt)("p",null,"RBAC API \u62d2\u7edd\u7528\u6237\u5229\u7528\u7f16\u8f91\u89d2\u8272\u6216\u8005\u89d2\u8272\u7ed1\u5b9a\u7684\u65b9\u5f0f\u8fdb\u884c\u63d0\u6743\u3002\u8fd9\u4e00\u9650\u5236\u662f\u5728 API \u5c42\u9762\u4f5c\u51fa\uff0c\u56e0\u6b64\u5373\u4f7f RBAC \u6ca1\u6709\u542f\u7528\u4e5f\u4ecd\u7136\u6709\u6548\u3002"),(0,l.kt)("p",null,"\u7528\u6237\u53ea\u80fd\u5728\u62e5\u6709\u4e00\u4e2a\u89d2\u8272\u7684\u6240\u6709\u6743\u9650\uff0c\u4e14\u4e0e\u8be5\u89d2\u8272\u7684\u751f\u6548\u8303\u56f4\u4e00\u81f4\u7684\u524d\u63d0\u4e0b\uff0c\u624d\u80fd\u5bf9\u89d2\u8272\u8fdb\u884c\u521b\u5efa\u548c\u66f4\u65b0\u3002\u4f8b\u5982\u7528\u6237 user-1 \u6ca1\u6709\u5217\u51fa\u96c6\u7fa4\u4e2d\u6240\u6709 Secret \u7684\u6743\u9650\uff0c\u5c31\u4e0d\u80fd\u521b\u5efa\u5177\u6709\u8fd9\u4e00\u6743\u9650\u7684\u96c6\u7fa4\u89d2\u8272\u3002"),(0,l.kt)("h2",{id:"\u5341\u4e09\u6027\u80fd\u76d1\u63a7\u5e73\u53f0"},"\u5341\u4e09\u3001\u6027\u80fd\u76d1\u63a7\u5e73\u53f0"),(0,l.kt)("h3",{id:"1-\u6982\u8ff0-1"},"1 \u6982\u8ff0"),(0,l.kt)("p",null,"\u5f00\u6e90\u8f6f\u4ef6 cAdvisor\uff08Container Advisor\uff09\u7528\u4e8e\u76d1\u63a7\u6240\u5728\u8282\u70b9\u7684\u5bb9\u5668\u8fd0\u884c\u72b6\u6001\uff0c\u5f53\u524d\u5df2\u7ecf\u88ab\u9ed8\u8ba4\u96c6\u6210\u5230 kubelet \u7ec4\u4ef6\u5185\uff0c\u9ed8\u8ba4\u4f7f\u7528 TCP 4194 \u7aef\u53e3\u3002\u5728\u5927\u89c4\u6a21\u5bb9\u5668\u96c6\u7fa4\uff0c\u4e00\u822c\u4f7f\u7528 Heapster + Influxdb + Grafana \u5e73\u53f0\u5b9e\u73b0\u96c6\u7fa4\u6027\u80fd\u6570\u636e\u7684\u91c7\u96c6\u3001\u5b58\u50a8\u4e0e\u5c55\u793a\u3002"),(0,l.kt)("h3",{id:"2-\u5c55\u793a\u51c6\u5907"},"2 \u5c55\u793a\u51c6\u5907"),(0,l.kt)("h4",{id:"21-\u57fa\u7840\u73af\u5883"},"2.1 \u57fa\u7840\u73af\u5883"),(0,l.kt)("p",null,"Kubernetes + heapster + Influxdb + Grafana\u3002"),(0,l.kt)("h4",{id:"23-\u539f\u7406"},"2.3 \u539f\u7406"),(0,l.kt)("p",null,"![](kubernetes notes/2022-05-27-16-05-27-image.png)"),(0,l.kt)("h5",{id:"231-heapster"},"2.3.1 Heapster"),(0,l.kt)("p",null,"\u96c6\u7fa4\u4e2d\u5404 Node \u8282\u70b9\u7684 cAdvisor \u7684\u6570\u636e\u91c7\u96c6\u6c47\u805a\u7cfb\u7edf\uff0c\u901a\u8fc7\u8c03\u7528 Node \u4e0a kubelet \u7684 API\uff0c\u518d\u901a\u8fc7 kubelet \u8c03\u7528 cAdvisor \u7684 API \u6765\u91c7\u96c6\u6240\u5728\u8282\u70b9\u4e0a\u6240\u6709\u5bb9\u5668\u7684\u6027\u80fd\u548c\u6570\u636e\u3002Heapster \u5bf9\u6027\u80fd\u6570\u636e\u8fdb\u884c\u805a\u5408\uff0c\u5e76\u5c06\u7ed3\u6784\u4fdd\u5b58\u5230\u540e\u7aef\u5b58\u50a8\u7cfb\u7edf\uff0cHeapster \u652f\u6301\u591a\u79cd\u540e\u7aef\u5b58\u50a8\u7cfb\u7edf\uff0c\u5982 Memory\u3001Influxed \u7b49\u3002"),(0,l.kt)("h5",{id:"232-influxdb"},"2.3.2 Influxdb"),(0,l.kt)("p",null,"\u5206\u5e03\u5f0f\u65f6\u5e8f\u6570\u636e\u5e93\uff08\u6bcf\u6761\u8bb0\u5f55\u90fd\u5e26\u6709\u65f6\u95f4\u6233\u5c5e\u6027\uff09\uff0c\u4e3b\u8981\u7528\u4e8e\u5b9e\u65f6\u6570\u636e\u91c7\u96c6\uff0c\u65f6\u95f4\u8ddf\u8e2a\u8bb0\u5f55\uff0c\u5b58\u50a8\u65f6\u95f4\u56fe\u8868\uff0c\u539f\u59cb\u6570\u636e\u7b49\u3002Influxdb \u63d0\u4f9b REST API \u7528\u4e8e\u6570\u636e\u7684\u5b58\u50a8\u4e0e\u67e5\u8be2\u3002"),(0,l.kt)("h5",{id:"233-grafana"},"2.3.3 Grafana"),(0,l.kt)("p",null,"\u901a\u8fc7 Dashboard \u5c06 Influxdb \u4e2d\u7684\u65f6\u5e8f\u6570\u636e\u5c55\u73b0\u6210\u56fe\u8868\u6216\u66f2\u7ebf\u7b49\u5f62\u5f0f\uff0c\u4fbf\u4e8e\u67e5\u770b\u96c6\u7fa4\u8fd0\u884c\u72b6\u6001\u3002"),(0,l.kt)("h3",{id:"3-\u90e8\u7f72-kubernetes-\u96c6\u7fa4\u6027\u80fd\u76d1\u63a7"},"3 \u90e8\u7f72 Kubernetes \u96c6\u7fa4\u6027\u80fd\u76d1\u63a7"),(0,l.kt)("h2",{id:"\u5341\u56dbhelm"},"\u5341\u56db\u3001Helm"),(0,l.kt)("h3",{id:"1-helm-\u5f15\u5165"},"1 Helm \u5f15\u5165"),(0,l.kt)("p",null,"K8S \u4e0a\u7684\u5e94\u7528\u5bf9\u8c61\uff0c\u90fd\u662f\u7531\u7279\u5b9a\u7684\u8d44\u6e90\u63cf\u8ff0\u7ec4\u6210\uff0c\u5305\u62ec Deployment\u3001Service \u7b49\u3002\u90fd\u4fdd\u5b58\u5404\u81ea\u6587\u4ef6\u4e2d\u6216\u8005\u96c6\u4e2d\u5199\u5230\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u7136\u540e ",(0,l.kt)("inlineCode",{parentName:"p"},"kubectl apply -f")," \u90e8\u7f72\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u5e94\u7528\u53ea\u6709\u4e00\u4e2a\u6216\u51e0\u4e2a\u8fd9\u6837\u7684\u670d\u52a1\u7ec4\u6210\uff0c\u4e0a\u9762\u90e8\u7f72\u65b9\u5f0f\u8db3\u591f\u4e86\u3002\u800c\u5bf9\u4e8e\u4e00\u4e2a\u590d\u6742\u7684\u5e94\u7528\uff0c\u4f1a\u6709\u5f88\u591a\u7c7b\u4f3c\u4e0a\u9762\u7684\u8d44\u6e90\u63cf\u8ff0\u6587\u4ef6\uff0c\u4f8b\u5982\u5fae\u670d\u52a1\u67b6\u6784\u5e94\u7528\uff0c\u7ec4\u6210\u5e94\u7528\u7684\u670d\u52a1\u53ef\u80fd\u591a\u8fbe\u5341\u4e2a\u3001\u51e0\u5341\u4e2a\u3002\u5982\u679c\u6709\u66f4\u65b0\u6216\u56de\u6eda\u5e94\u7528\u7684\u9700\u6c42\uff0c\u53ef\u80fd\u8981\u4fee\u6539\u548c\u7ef4\u62a4\u6240\u6d89\u53ca\u7684\u5927\u91cf\u8d44\u6e90\u6587\u4ef6\uff0c\u800c\u8fd9\u79cd\u7ec4\u7ec7\u548c\u7ba1\u7406\u5e94\u7528\u7684\u65b9\u5f0f\u5c31\u663e\u5f97\u529b\u4e0d\u4ece\u5fc3\u4e86\u3002\u4e14\u7531\u4e8e\u7f3a\u5c11\u5bf9\u53d1\u5e03\u8fc7\u7684\u5e94\u7528\u7248\u672c\u7ba1\u7406\u548c\u63a7\u5236\uff0c\u4f7f Kubernetes \u4e0a\u7684\u5e94\u7528\u7ef4\u62a4\u548c\u66f4\u65b0\u7b49\u9762\u4e34\u8bf8\u591a\u7684\u6311\u6218\uff0c\u4e3b\u8981\u9762\u4e34\u4ee5\u4e0b\u95ee\u9898\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5982\u4f55\u5c06\u8fd9\u4e9b\u670d\u52a1\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u7ba1\u7406")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u8fd9\u4e9b\u8d44\u6e90\u6587\u4ef6\u5982\u4f55\u9ad8\u6548\u590d\u7528")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4e0d\u652f\u6301\u5e94\u7528\u7ea7\u522b\u7684\u7248\u672c\u7ba1\u7406"))),(0,l.kt)("h3",{id:"2-helm-\u4ecb\u7ecd"},"2 Helm \u4ecb\u7ecd"),(0,l.kt)("p",null,"Helm \u662f\u4e00\u4e2a Kubernetes \u7684\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u5c31\u50cf Linux \u4e0b\u7684\u5305\u7ba1\u7406\u5668\uff0c\u5982 yum/apt \u7b49\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5c06\u4e4b\u524d\u6253\u5305\u597d\u7684 yaml \u6587\u4ef6\u90e8\u7f72\u5230 Kubernetes \u4e0a\u3002"),(0,l.kt)("p",null,"Helm \u6709\u4e09\u4e2a\u91cd\u8981\u6982\u5ff5\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"helm\uff1a\u4e00\u4e2a\u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u6237 Kubernetes \u5e94\u7528 Chart \u7684\u521b\u5efa\u3001\u6253\u5305\u3001\u53d1\u5e03\u548c\u7ba1\u7406\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Chart\uff1a\u5e94\u7528\u63cf\u8ff0\uff0c\u4e00\u7cfb\u5217\u7528\u4e8e\u63cf\u8ff0 K8S \u8d44\u6e90\u76f8\u5173\u6587\u4ef6\u7684\u96c6\u5408\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Release\uff1a\u57fa\u4e8e Chart \u7684\u90e8\u7f72\u5b9e\u4f53\uff0c\u4e00\u4e2a Chart \u88ab Helm \u8fd0\u884c\u540e\u5c06\u4f1a\u751f\u6210\u5bf9\u5e94\u7684\u4e00\u4e2a Release\uff0c\u5c06\u5728 K8S \u4e2d\u521b\u5efa\u51fa\u771f\u5b9e\u8fd0\u884c\u7684\u8d44\u6e90\u5bf9\u8c61\u3002"))),(0,l.kt)("h3",{id:"3-helm-v3-\u53d8\u5316"},"3 Helm v3 \u53d8\u5316"),(0,l.kt)("p",null,"2019 \u5e74 11 \u6708 13 \u65e5\uff0cHelm \u56e2\u961f\u53d1\u5e03 Helm v3 \u7684\u7b2c\u4e00\u4e2a\u7248\u672c\uff0c\u8be5\u7248\u672c\u7684\u4e3b\u8981\u53d8\u5316\u5982\u4e0b\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u6700\u660e\u663e\u7684\u53d8\u5316\u5c31\u662f Tiller \u7684\u5220\u9664\u3002")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Release \u540d\u79f0\u53ef\u4ee5\u5728\u4e0d\u540c\u547d\u540d\u7a7a\u95f4\u91cd\u7528\u3002")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u652f\u6301\u5c06 Chart \u63a8\u9001\u81f3 Docker \u955c\u50cf\u4ed3\u5e93\u4e2d\u3002")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5176\u5b83\u3002"))),(0,l.kt)("h3",{id:"4-helm-\u5ba2\u6237\u7aef"},"4 Helm \u5ba2\u6237\u7aef"),(0,l.kt)("h4",{id:"41-\u914d\u7f6e\u56fd\u5185-chart-\u4ed3\u5e93"},"4.1 \u914d\u7f6e\u56fd\u5185 Chart \u4ed3\u5e93"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"https://mirror.azure.cn/kubernetes/charts/"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"https://hub.kubeapps.com/charts/incubator")))),(0,l.kt)("h5",{id:"411-\u6dfb\u52a0\u5b58\u50a8\u5e93"},"4.1.1 \u6dfb\u52a0\u5b58\u50a8\u5e93"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo add stable https://mirror.azure.cn/kubernetes/charts\n\nhelm repo add aliyun https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts\n\nhelm repo update\n")),(0,l.kt)("h5",{id:"412-\u67e5\u770b\u914d\u7f6e\u7684\u5b58\u50a8\u5e93"},"4.1.2 \u67e5\u770b\u914d\u7f6e\u7684\u5b58\u50a8\u5e93"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo list\n\nhelm search repo stable\n")),(0,l.kt)("h5",{id:"413-\u5220\u9664\u5b58\u50a8\u5e93"},"4.1.3 \u5220\u9664\u5b58\u50a8\u5e93"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"helm repo remove aliyun\n")),(0,l.kt)("h3",{id:"5-helm-\u57fa\u672c\u4f7f\u7528"},"5 Helm \u57fa\u672c\u4f7f\u7528"),(0,l.kt)("h4",{id:"51-\u4f7f\u7528-helm-\u90e8\u7f72\u4e00\u4e2a\u5e94\u7528"},"5.1 \u4f7f\u7528 Helm \u90e8\u7f72\u4e00\u4e2a\u5e94\u7528"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"helm search repo mysql\n\nhelm show chart stable/mysql\n\nhelm install mysql stable/mysql\n\nhelm list\n\nhelm status mysql\n")),(0,l.kt)("h4",{id:"52-\u5b89\u88c5\u524d\u81ea\u5b9a\u4e49-chart-\u914d\u7f6e\u9009\u9879"},"5.2 \u5b89\u88c5\u524d\u81ea\u5b9a\u4e49 Chart \u914d\u7f6e\u9009\u9879"),(0,l.kt)("p",null,"\u81ea\u5b9a\u4e49\u9009\u9879\u662f\u56e0\u4e3a\u5e76\u4e0d\u662f\u6240\u6709\u7684 Chart \u90fd\u80fd\u6309\u7167\u9ed8\u8ba4\u914d\u7f6e\u8fd0\u884c\u6210\u529f\uff0c\u53ef\u80fd\u4f1a\u9700\u8981\u4e00\u4e9b\u73af\u5883\u4f9d\u8d56\uff0c\u4f8b\u5982 PV\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u81ea\u5b9a\u4e49 Chart \u914d\u7f6e\u9009\u9879\uff0c\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u4f20\u9012\u914d\u7f6e\u6570\u636e\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"--values"),"\uff08\u6216 ",(0,l.kt)("inlineCode",{parentName:"p"},"-f"),"\uff09\uff1a\u6307\u5b9a\u5e26\u6709\u8986\u76d6\u7684 YAML \u6587\u4ef6\u3002\u53ef\u4ee5\u6307\u5b9a\u591a\u6b21\uff0c\u6700\u53f3\u8fb9\u7684\u6587\u4ef6\u4f18\u5148\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"--set"),"\uff1a\u5728\u547d\u4ee4\u884c\u4e0a\u6307\u5b9a\u66ff\u4ee3\u3002"))),(0,l.kt)("p",null,"\u5982\u679c\u4e24\u8005\u90fd\u7528\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"--set")," \u4f18\u5148\u7ea7\u66f4\u9ad8\u3002"),(0,l.kt)("h3",{id:""}))}s.isMDXComponent=!0}}]);